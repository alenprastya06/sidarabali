import{G as ce,r as j,i as T,C as xe,c as l,b as n,d as e,g as b,l as p,t as m,n as I,D as ee,w as h,v as _,H as Q,k as ve,u as fe,o as be,e as ke,f as he,F as A,h as N,A as ye,x as W,I as Y,S as D,J as we}from"./index--Gagy8kk.js";const _e={class:"bg-gray-50"},je={class:"container mx-auto max-w-7xl"},Pe={class:"mb-6"},Ce={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Be={class:"flex items-center justify-between"},Le={class:"flex items-center space-x-4"},Me={class:"text-sm text-gray-500 mt-1"},$e={key:0,class:"text-green-600 ml-2"},De={key:1,class:"text-red-500 ml-2"},Te={class:"flex items-center space-x-3"},Ue={class:"text-sm text-gray-500"},ze={key:0,class:"px-6 pb-6 border-t border-gray-100"},Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ie={class:"lg:col-span-2"},Ve={class:"lg:col-span-2"},Ae={class:"mb-8"},Ne={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Fe={class:"flex items-center justify-between"},Ke={class:"flex items-center space-x-4"},qe={class:"text-sm text-gray-500 mt-1"},He={key:0,class:"text-green-600 ml-2"},Oe={key:1,class:"text-red-500 ml-2"},Re={class:"flex items-center space-x-3"},Ee={class:"text-sm text-gray-500"},Ge={key:0,class:"px-6 pb-6 border-t border-gray-100"},Je={class:"mb-8"},We={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ye={class:"mb-8"},Qe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Xe={class:"mb-8"},Ze={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},et={class:"flex items-center"},tt={key:0,class:"w-5 h-5 mr-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},at={key:1,class:"w-5 h-5 mr-3 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},st={class:"font-medium"},nt={__name:"PemiliDanLahan",props:{idPengajuan:{type:[Number,String],default:null}},emits:["owner-updated","lahan-updated"],setup(X,{emit:V}){const P=X,z=V,q=ce("selectedPengajuanId",null),S=j(!1),f=j(!1),y=j(null),i=j({nik:"",email:"",phone:"",jenis_kelamin:"L",nama:"",npwp:"",tanggal_lahir:"",agama:"",kewarganegaraan:"Indonesia",alamat:"",pekerjaan:""}),g=j({no_surat_rt:"",jenis_bangunan:"",luas_lahan:0,alamat_rt:"",alamat_rw:"",kode_pos:"",wilayah_kelurahan:"",wilayah_kecamatan:"",wilayah_kota:""}),L=T(()=>i.value.nama&&i.value.nik&&i.value.email&&i.value.phone&&i.value.jenis_kelamin&&i.value.tanggal_lahir&&i.value.agama&&i.value.kewarganegaraan&&i.value.alamat&&i.value.pekerjaan),x=T(()=>g.value.no_surat_rt&&g.value.jenis_bangunan&&g.value.luas_lahan>0&&g.value.alamat_rt&&g.value.alamat_rw&&g.value.kode_pos&&g.value.wilayah_kelurahan&&g.value.wilayah_kecamatan&&g.value.wilayah_kota),c=()=>{i.value={nik:"",email:"",phone:"",jenis_kelamin:"L",nama:"",npwp:"",tanggal_lahir:"",agama:"",kewarganegaraan:"Indonesia",alamat:"",pekerjaan:""},g.value={no_surat_rt:"",jenis_bangunan:"",luas_lahan:0,alamat_rt:"",alamat_rw:"",kode_pos:"",wilayah_kelurahan:"",wilayah_kecamatan:"",wilayah_kota:""},z("owner-updated",null),z("lahan-updated",null)},w=()=>{S.value=!S.value},H=()=>{f.value=!f.value},F=(M,a)=>{y.value={type:M,text:a},setTimeout(()=>{y.value=null},5e3)},C=()=>{L.value?z("owner-updated",{...i.value}):z("owner-updated",null)},r=()=>{x.value?z("lahan-updated",{...g.value}):z("lahan-updated",null)},O=async()=>{L.value?(F("success","Data pemilik telah divalidasi dan siap disimpan!"),C()):F("error","Harap lengkapi semua field yang wajib diisi.")},R=async()=>{x.value?(F("success","Data lahan telah divalidasi dan siap disimpan!"),r()):F("error","Harap lengkapi semua field yang wajib diisi.")};return xe(()=>P.idPengajuan||q?.value,M=>{M||c()},{immediate:!0}),(M,a)=>(n(),l("div",_e,[e("div",je,[e("div",Pe,[e("div",Ce,[e("button",{onClick:w,class:"w-full px-6 py-5 text-left hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"},[e("div",Be,[e("div",Le,[a[22]||(a[22]=e("div",{class:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[a[21]||(a[21]=e("h2",{class:"text-xl font-semibold text-gray-800"},"Data Pemilik Lahan",-1)),e("p",Me,[a[20]||(a[20]=p(" Informasi pribadi pemilik lahan ")),L.value?(n(),l("span",$e,"✓ Lengkap")):(n(),l("span",De,"⚠ Belum lengkap"))])])]),e("div",Te,[e("span",Ue,m(S.value?"Tutup":"Buka")+" Form ",1),(n(),l("svg",{class:I([{"rotate-180":S.value},"w-5 h-5 text-gray-400 transition-transform duration-200"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a[23]||(a[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])]),S.value?(n(),l("div",ze,[e("form",{onSubmit:ee(O,["prevent"]),class:"mt-6"},[e("div",Se,[e("div",null,[a[24]||(a[24]=e("label",{for:"owner_nama",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Nama Lengkap "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_nama","onUpdate:modelValue":a[0]||(a[0]=u=>i.value.nama=u),onInput:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan nama lengkap",required:""},null,544),[[_,i.value.nama]])]),e("div",null,[a[25]||(a[25]=e("label",{for:"owner_nik",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" NIK (Nomor Induk Kependudukan) "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_nik","onUpdate:modelValue":a[1]||(a[1]=u=>i.value.nik=u),onInput:C,maxlength:"16",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"16 digit NIK",required:""},null,544),[[_,i.value.nik]])]),e("div",null,[a[26]||(a[26]=e("label",{for:"owner_tanggal_lahir",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Tanggal Lahir "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"date",id:"owner_tanggal_lahir","onUpdate:modelValue":a[2]||(a[2]=u=>i.value.tanggal_lahir=u),onChange:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},null,544),[[_,i.value.tanggal_lahir]])]),e("div",null,[a[28]||(a[28]=e("label",{for:"owner_jenis_kelamin",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Jenis Kelamin "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{id:"owner_jenis_kelamin","onUpdate:modelValue":a[3]||(a[3]=u=>i.value.jenis_kelamin=u),onChange:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},a[27]||(a[27]=[e("option",{value:"L"},"Laki-laki",-1),e("option",{value:"P"},"Perempuan",-1)]),544),[[Q,i.value.jenis_kelamin]])]),e("div",null,[a[30]||(a[30]=e("label",{for:"owner_agama",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Agama "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{id:"owner_agama","onUpdate:modelValue":a[4]||(a[4]=u=>i.value.agama=u),onChange:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},a[29]||(a[29]=[ve('<option value="" disabled>Pilih Agama</option><option value="Islam">Islam</option><option value="Kristen">Kristen</option><option value="Katolik">Katolik</option><option value="Hindu">Hindu</option><option value="Buddha">Buddha</option><option value="Konghucu">Konghucu</option>',7)]),544),[[Q,i.value.agama]])]),e("div",null,[a[31]||(a[31]=e("label",{for:"owner_kewarganegaraan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kewarganegaraan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_kewarganegaraan","onUpdate:modelValue":a[5]||(a[5]=u=>i.value.kewarganegaraan=u),onInput:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},null,544),[[_,i.value.kewarganegaraan]])]),e("div",null,[a[32]||(a[32]=e("label",{for:"owner_pekerjaan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Pekerjaan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_pekerjaan","onUpdate:modelValue":a[6]||(a[6]=u=>i.value.pekerjaan=u),onInput:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan pekerjaan",required:""},null,544),[[_,i.value.pekerjaan]])]),e("div",null,[a[33]||(a[33]=e("label",{for:"owner_email",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Email "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"email",id:"owner_email","onUpdate:modelValue":a[7]||(a[7]=u=>i.value.email=u),onInput:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"contoh@email.com",required:""},null,544),[[_,i.value.email]])]),e("div",null,[a[34]||(a[34]=e("label",{for:"owner_phone",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Nomor Telepon "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"tel",id:"owner_phone","onUpdate:modelValue":a[8]||(a[8]=u=>i.value.phone=u),onInput:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"08xxxxxxxxxx",required:""},null,544),[[_,i.value.phone]])]),e("div",Ie,[a[35]||(a[35]=e("label",{for:"owner_alamat",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Alamat "),e("span",{class:"text-red-500"},"*")],-1)),h(e("textarea",{id:"owner_alamat","onUpdate:modelValue":a[9]||(a[9]=u=>i.value.alamat=u),onInput:C,rows:"3",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan alamat lengkap sesuai KTP",required:""},null,544),[[_,i.value.alamat]])]),e("div",Ve,[a[36]||(a[36]=e("label",{for:"owner_npwp",class:"block text-sm font-medium text-gray-700 mb-2"}," NPWP (Opsional) ",-1)),h(e("input",{type:"text",id:"owner_npwp","onUpdate:modelValue":a[10]||(a[10]=u=>i.value.npwp=u),onInput:C,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"15 digit NPWP (jika ada)"},null,544),[[_,i.value.npwp]])])]),a[37]||(a[37]=e("div",{class:"mt-8 flex justify-end"},[e("div",{class:"text-sm text-gray-500"}," Data akan disimpan otomatis saat submit dokumen ")],-1))],32)])):b("",!0)])]),e("div",Ae,[e("div",Ne,[e("button",{onClick:H,class:"w-full px-6 py-5 text-left hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"},[e("div",Fe,[e("div",Ke,[a[40]||(a[40]=e("div",{class:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("div",null,[a[39]||(a[39]=e("h2",{class:"text-xl font-semibold text-gray-800"},"Data Lahan",-1)),e("p",qe,[a[38]||(a[38]=p(" Informasi lokasi dan detail lahan ")),x.value?(n(),l("span",He,"✓ Lengkap")):(n(),l("span",Oe,"⚠ Belum lengkap"))])])]),e("div",Re,[e("span",Ee,m(f.value?"Tutup":"Buka")+" Form ",1),(n(),l("svg",{class:I([{"rotate-180":f.value},"w-5 h-5 text-gray-400 transition-transform duration-200"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a[41]||(a[41]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])]),f.value?(n(),l("div",Ge,[e("form",{onSubmit:ee(R,["prevent"]),class:"mt-6"},[e("div",Je,[a[43]||(a[43]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),p(" Informasi Dokumen ")],-1)),e("div",We,[e("div",null,[a[42]||(a[42]=e("label",{for:"lahan_no_surat_rt",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Nomor Surat RT "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_no_surat_rt","onUpdate:modelValue":a[11]||(a[11]=u=>g.value.no_surat_rt=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nomor surat dari RT",required:""},null,544),[[_,g.value.no_surat_rt]])])])]),e("div",Ye,[a[46]||(a[46]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),p(" Detail Lahan & Bangunan ")],-1)),e("div",Qe,[e("div",null,[a[44]||(a[44]=e("label",{for:"lahan_jenis_bangunan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Jenis Bangunan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_jenis_bangunan","onUpdate:modelValue":a[12]||(a[12]=u=>g.value.jenis_bangunan=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Contoh: Rumah Tinggal, Ruko, dll",required:""},null,544),[[_,g.value.jenis_bangunan]])]),e("div",null,[a[45]||(a[45]=e("label",{for:"lahan_luas_lahan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Luas Lahan (m²) "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"number",step:"0.1",id:"lahan_luas_lahan","onUpdate:modelValue":a[13]||(a[13]=u=>g.value.luas_lahan=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Contoh: 120.5",required:""},null,544),[[_,g.value.luas_lahan,void 0,{number:!0}]])])])]),e("div",Xe,[a[53]||(a[53]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]),p(" Alamat Lahan ")],-1)),e("div",Ze,[e("div",null,[a[47]||(a[47]=e("label",{for:"lahan_alamat_rt",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" RT "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_alamat_rt","onUpdate:modelValue":a[14]||(a[14]=u=>g.value.alamat_rt=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"001",required:""},null,544),[[_,g.value.alamat_rt]])]),e("div",null,[a[48]||(a[48]=e("label",{for:"lahan_alamat_rw",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" RW "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_alamat_rw","onUpdate:modelValue":a[15]||(a[15]=u=>g.value.alamat_rw=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"001",required:""},null,544),[[_,g.value.alamat_rw]])]),e("div",null,[a[49]||(a[49]=e("label",{for:"lahan_kode_pos",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kode Pos "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_kode_pos","onUpdate:modelValue":a[16]||(a[16]=u=>g.value.kode_pos=u),onInput:r,maxlength:"5",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"12345",required:""},null,544),[[_,g.value.kode_pos]])]),e("div",null,[a[50]||(a[50]=e("label",{for:"lahan_wilayah_kelurahan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kelurahan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_wilayah_kelurahan","onUpdate:modelValue":a[17]||(a[17]=u=>g.value.wilayah_kelurahan=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nama kelurahan",required:""},null,544),[[_,g.value.wilayah_kelurahan]])]),e("div",null,[a[51]||(a[51]=e("label",{for:"lahan_wilayah_kecamatan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kecamatan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_wilayah_kecamatan","onUpdate:modelValue":a[18]||(a[18]=u=>g.value.wilayah_kecamatan=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nama kecamatan",required:""},null,544),[[_,g.value.wilayah_kecamatan]])]),e("div",null,[a[52]||(a[52]=e("label",{for:"lahan_wilayah_kota",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kota/Kabupaten "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_wilayah_kota","onUpdate:modelValue":a[19]||(a[19]=u=>g.value.wilayah_kota=u),onInput:r,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nama kota/kabupaten",required:""},null,544),[[_,g.value.wilayah_kota]])])])]),a[54]||(a[54]=e("div",{class:"flex justify-end"},[e("div",{class:"text-sm text-gray-500"}," Data akan disimpan otomatis saat submit dokumen ")],-1))],32)])):b("",!0)])]),y.value?(n(),l("div",{key:0,class:I(["fixed bottom-6 right-6 max-w-md p-4 rounded-lg shadow-lg z-50 transition-all duration-300",y.value.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"])},[e("div",et,[y.value.type==="success"?(n(),l("svg",tt,a[55]||(a[55]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(n(),l("svg",at,a[56]||(a[56]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"},null,-1)]))),e("span",st,m(y.value.text),1)])],2)):b("",!0)])]))}},lt={class:"min-h-screen bg-gray-50"},ot={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},rt={class:"mb-6 sm:mb-8"},it={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-0"},ut={class:"flex items-center w-full sm:w-auto"},dt={key:0,class:"w-3 h-3 sm:w-5 sm:h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},mt={key:1,class:"text-xs sm:text-sm"},pt={key:0,class:"text-center py-8 sm:py-12"},gt={key:1,class:"text-center py-8 sm:py-12"},ct={class:"bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6 max-w-md mx-auto"},xt={class:"text-red-500 text-xs sm:text-sm mt-1"},vt={key:2,class:"space-y-4 sm:space-y-6"},ft={key:0,class:"bg-white rounded-lg shadow-sm border"},bt={class:"p-4 sm:p-6"},kt={class:"relative"},ht=["value","disabled"],yt={key:0,class:"mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-100"},wt={class:"text-sm text-blue-700 font-medium"},_t={key:0,class:"text-xs text-blue-600 mt-1"},jt={class:"mt-4"},Pt={key:0,class:"mt-2 space-y-1"},Ct={class:"capitalize"},Bt={key:1,class:"text-sm text-blue-700 mt-2"},Lt={key:1,class:"mt-4 sm:mt-6 bg-amber-50 border border-amber-200 rounded-lg p-3 sm:p-4"},Mt={class:"flex items-start"},$t={class:"flex-1 min-w-0"},Dt={class:"mt-3"},Tt={class:"space-y-2"},Ut={class:"space-y-2 sm:space-y-0 sm:flex sm:items-center sm:justify-between"},zt={class:"flex-1 min-w-0"},St={class:"text-sm text-gray-800 font-medium truncate"},It={class:"flex flex-col sm:flex-row sm:items-center mt-1 gap-1 sm:gap-2"},Vt={class:"text-xs text-gray-500"},At={key:1,class:"bg-white rounded-lg shadow-sm border"},Nt={class:"p-4 sm:p-6"},Ft={key:2,class:"bg-white rounded-lg shadow-sm border"},Kt={class:"p-4 sm:p-6 border-b border-gray-100"},qt={class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"},Ht={class:"p-4 sm:p-6"},Ot={key:0,class:"space-y-4 sm:space-y-6"},Rt={class:"space-y-4"},Et={class:"flex items-start"},Gt={class:"w-6 h-6 sm:w-8 sm:h-8 bg-gray-100 text-gray-700 rounded-full flex items-center justify-center text-xs sm:text-sm font-semibold mr-3 sm:mr-4 flex-shrink-0 mt-1"},Jt={class:"flex-1 min-w-0"},Wt={class:"text-sm sm:text-base text-gray-900 font-medium mb-2 capitalize"},Yt={class:"space-y-4 ml-9 sm:ml-12"},Qt={class:"flex flex-col sm:flex-row sm:items-center gap-3"},Xt=["onClick"],Zt={key:0,class:"flex items-center bg-green-50 border border-green-200 rounded-lg px-3 py-2 w-full sm:w-auto sm:flex-1"},ea={class:"flex-1 min-w-0"},ta={class:"text-sm text-green-700 font-medium block truncate"},aa={class:"text-xs text-green-600"},sa=["onUpdate:modelValue"],na={key:0,class:"space-y-3"},la={class:"space-y-2"},oa={class:"flex items-center justify-between"},ra={class:"flex items-center flex-1 min-w-0"},ia={class:"flex-1 min-w-0"},ua={class:"text-sm text-gray-700 font-medium block truncate"},da={class:"text-xs text-gray-500"},ma=["onClick"],pa={key:0,class:"mt-2 text-xs text-gray-600 bg-gray-100 p-2 rounded"},ga={key:1,class:"text-center py-8 sm:py-12"},ca={class:"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6 max-w-md mx-auto"},xa={class:"text-sm text-green-700"},va={key:3,class:"bg-white rounded-lg shadow-sm border"},fa={class:"p-4 sm:p-6 space-y-4 sm:space-y-6"},ba={class:"border border-gray-200 rounded-lg p-3 sm:p-4"},ka={class:"text-sm sm:text-base text-gray-900"},ha={key:0,class:"border border-gray-200 rounded-lg p-3 sm:p-4"},ya={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 text-sm"},wa={class:"flex flex-col sm:flex-row sm:items-center"},_a={class:"font-medium text-sm"},ja={class:"flex flex-col sm:flex-row sm:items-center"},Pa={class:"font-medium text-sm"},Ca={class:"flex flex-col sm:flex-row sm:items-center"},Ba={class:"font-medium text-sm break-all"},La={key:0,class:"flex flex-col sm:flex-row sm:items-center"},Ma={class:"font-medium text-sm"},$a={key:1,class:"border border-gray-200 rounded-lg p-3 sm:p-4"},Da={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 text-sm"},Ta={class:"flex flex-col sm:flex-row sm:items-center"},Ua={class:"font-medium text-sm"},za={class:"flex flex-col sm:flex-row sm:items-center"},Sa={class:"font-medium text-sm"},Ia={key:0,class:"flex flex-col sm:flex-row sm:items-center"},Va={class:"font-medium text-sm"},Aa={key:1,class:"flex flex-col sm:flex-row sm:items-center"},Na={class:"font-medium text-sm"},Fa={key:2,class:"border border-gray-200 rounded-lg p-3 sm:p-4"},Ka={class:"space-y-2 sm:space-y-3"},qa={class:"flex-1 min-w-0 mr-3"},Ha={class:"text-sm font-medium text-gray-900 capitalize mb-1"},Oa={key:0,class:"text-xs text-gray-600"},Ra={class:"truncate"},Ea={key:0,class:"mt-1"},Ga={key:1,class:"text-xs text-gray-600"},Ja={class:"truncate"},Wa={key:0,class:"mt-1"},Ya={class:"flex items-center ml-2 flex-shrink-0"},Qa={key:0,class:"w-4 h-4 sm:w-5 sm:h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},Xa={key:1,class:"w-4 h-4 sm:w-5 sm:h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},Za={key:3,class:"bg-amber-50 border border-amber-200 rounded-lg p-3 sm:p-4"},es={class:"flex items-start"},ts={class:"flex-1"},as={class:"text-sm text-amber-700 mt-1 space-y-1"},ss={key:0},ns={key:1},ls={class:"border-t border-gray-100 pt-4 sm:pt-6"},os=["disabled"],rs={key:0,class:"w-4 h-4 sm:w-5 sm:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},is={key:1,class:"w-4 h-4 sm:w-5 sm:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},us={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-4 sm:pt-6 gap-3 sm:gap-0"},ds={key:1,class:"hidden sm:block"},te=4,ps={__name:"HalamanPermohonan",setup(X){const V=j([]),P=j(""),z=j(!0),q=j(null),S=localStorage.getItem("token");parseInt(localStorage.getItem("id"));const f=j({}),y=j({}),i=j({}),g=j({}),L=j(null),x=j(null),c=j(null),w=j(1),H=fe(),F=()=>{H.back()},C=[{title:"Pilih Pengajuan",description:"Pilih jenis izin yang akan diajukan"},{title:"Data Pemilik & Lahan",description:"Lengkapi informasi pemilik dan lahan"},{title:"Upload Dokumen",description:"Upload dokumen persyaratan"},{title:"Review & Submit",description:"Periksa dan kirim pengajuan"}];we("selectedPengajuanId",P);const r=T(()=>{const s=V.value.find(t=>t.id===P.value);return s?(s&&!Array.isArray(s.Persyaratans)&&(s.Persyaratans=[]),s&&s.name.trim().toLowerCase()==="standar pelayanan kelengkapan administrasi permohonan rekomendasi hak atas tanah"&&L.value===!0?{...s,Persyaratans:filteredRequirements}:s):null}),O=T(()=>V.value.some(s=>s.pengajuan_aktif)),R=T(()=>V.value.filter(s=>s.pengajuan_aktif));T(()=>!1);const M=T(()=>x.value&&x.value.nama&&x.value.nik&&x.value.email),a=T(()=>c.value&&c.value.jenis_bangunan&&c.value.luas_lahan);T(()=>!1);const u=T(()=>!(!r.value||!M.value||!a.value)),Z=T(()=>{switch(w.value){case 1:return P.value&&!r.value?.pengajuan_aktif;case 2:return M.value&&a.value;case 3:return!0;default:return!0}}),E=s=>({menunggu_perbaikan:"Menunggu Perbaikan",dalam_proses:"Dalam Proses",menunggu_verifikasi:"Menunggu Verifikasi",pending:"Pending",ditinjau:"Sedang Ditinjau",disetujui:"Disetujui",ditolak:"Ditolak",selesai:"Selesai"})[s]||s.charAt(0).toUpperCase()+s.slice(1).replace(/_/g," "),ae=s=>({menunggu_perbaikan:"bg-amber-100 text-amber-800",dalam_proses:"bg-blue-100 text-blue-800",menunggu_verifikasi:"bg-purple-100 text-purple-800",pending:"bg-yellow-100 text-yellow-800",ditinjau:"bg-indigo-100 text-indigo-800",disetujui:"bg-green-100 text-green-800",ditolak:"bg-red-100 text-red-800",selesai:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800",se=()=>{w.value<te&&Z.value&&w.value++},ne=()=>{w.value>1&&w.value--},K=s=>{if(s>w.value)return!1;switch(s){case 1:return P.value&&!r.value?.pengajuan_aktif;case 2:return M.value&&a.value;case 3:return!0;case 4:return u.value;default:return!1}},le=s=>K(s)?"bg-green-500 text-white":w.value===s?"bg-blue-500 text-white":"bg-gray-300 text-gray-600",oe=s=>{x.value=s},re=s=>{c.value=s},G=async()=>{try{const s=await W.get("https://bitwisi.cloud/api/jenis-pengajuan",{headers:{Authorization:`Bearer ${S}`}});V.value=s.data}catch(s){q.value=s.response?s.response.data.message:s.message}finally{z.value=!1}},ie=async()=>{if(console.log("onPengajuanChange triggered, selectedPengajuanId:",P.value),!P.value){console.log("No pengajuan selected, resetting state"),L.value=null,f.value={},y.value={},i.value={},g.value={},x.value=null,c.value=null,w.value=1;return}const s=V.value.find(d=>d.id===P.value);if(!s){console.log("Selected pengajuan not found");return}if(console.log("Selected pengajuan:",s.name),s.pengajuan_aktif){console.log("Active submission found:",s.pengajuan_aktif),await Y(),D.fire({icon:"warning",title:"Pengajuan Tidak Dapat Dipilih",text:`Anda memiliki pengajuan aktif untuk "${s.name}" dengan status: ${E(s.pengajuan_aktif.status)}. Silakan tunggu hingga proses selesai sebelum mengajukan kembali.`,confirmButtonColor:"#f59e0b"}),await Y(),P.value="",L.value=null;return}if(s.name.trim().toLowerCase()==="standar pelayanan kelengkapan administrasi permohonan rekomendasi hak atas tanah"){console.log("Target pengajuan matched, showing Swal prompt");try{setTimeout(async()=>{const d=await D.fire({icon:"question",title:"Konfirmasi Pendafataran Peningkatan Hak",text:"Apakah Anda Anda Pertama Kali Melakukan Pendaftaramn ?",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"});L.value=d.isConfirmed,console.log("HGB status set to:",L.value),f.value={},y.value={},i.value={},g.value={},x.value=null,c.value=null,w.value=1},100)}catch(d){console.error("Swal error:",d),D.fire({icon:"error",title:"Kesalahan",text:"Gagal menampilkan konfirmasi HGB. Silakan coba lagi.",confirmButtonColor:"#ef4444"}),L.value=null}}else console.log("Not the target pengajuan, resetting HGB"),await Y(),L.value=null,f.value={},y.value={},i.value={},g.value={},x.value=null,c.value=null,w.value=1},ue=s=>{const t=document.createElement("input");t.type="file",t.multiple=!1,t.accept=".pdf,.doc,.docx,.jpg,.jpeg,.png",t.onchange=d=>{const o=d.target.files[0];if(!o)return;const v=10*1024*1024;if(o.size>v){D.fire({icon:"error",title:"Ukuran File Terlalu Besar",text:"Ukuran file tidak boleh lebih dari 10 MB",confirmButtonColor:"#3085d6"});return}y.value[s]=o},t.click()},de=async(s,t,d="")=>{const o=new FormData;o.append("file",t),console.log(`Starting upload for requirement ${s}, file: ${t.name}`);try{const v=new AbortController,k=setTimeout(()=>v.abort(),6e4),U=await W.post("https://invitations.my.id/api/upload-file",o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${S}`},signal:v.signal,timeout:6e4,onUploadProgress:$=>{const ge=Math.round($.loaded*100/$.total);console.log(`Upload progress for ${t.name}: ${ge}%`)}});if(clearTimeout(k),console.log(`Upload completed for ${t.name}:`,U.data),!U.data||!U.data.data||!U.data.data.path)throw new Error("Invalid response structure from upload API");const B=U.data.data.path;f.value[s]||(f.value[s]=[]);const J={id:Date.now(),name:t.name,size:(t.size/(1024*1024)).toFixed(2)+" MB",path:B,user_note:d};return f.value[s].push(J),{url:B,originalName:t.name,mimeType:t.type,fileSize:t.size,userNote:d}}catch(v){console.error("Upload error details:",{error:v,message:v.message,response:v.response?.data,status:v.response?.status});let k="Gagal mengunggah file";throw v.name==="AbortError"?k="Upload timeout - file terlalu besar atau koneksi lambat":v.code==="ECONNABORTED"?k="Upload timeout - coba lagi dengan file yang lebih kecil":v.response?k=v.response.data?.message||`Upload failed: ${v.response.status}`:v.request&&(k="Tidak dapat terhubung ke server upload"),new Error(k)}},me=(s,t)=>{f.value[s]&&(f.value[s]=f.value[s].filter(d=>d.id!==t))},pe=async()=>{if(r.value){if(!M.value){D.fire({icon:"warning",title:"Data Pemilik Belum Lengkap",text:"Harap lengkapi data pemilik terlebih dahulu.",confirmButtonColor:"#f59e0b"});return}if(!a.value){D.fire({icon:"warning",title:"Data Lahan Belum Lengkap",text:"Harap lengkapi data lahan terlebih dahulu.",confirmButtonColor:"#f59e0b"});return}D.fire({title:"Mengirim Pengajuan...",text:"Mohon tunggu, pengajuan sedang diproses",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{D.showLoading()}});try{let s=[];if(r.value.Persyaratans&&r.value.Persyaratans.length>0){const v=[];for(let k=0;k<r.value.Persyaratans.length;k++){const U=y.value[k],B=f.value[k]&&f.value[k].length>0;!U&&!B&&v.push(r.value.Persyaratans[k])}for(let k=0;k<r.value.Persyaratans.length;k++){const U=r.value.Persyaratans[k];if(y.value[k]){const B=y.value[k],J=i.value[k]||"";try{console.log(`Uploading new file: ${B.name}`);const $=await de(k,B,J);s.push({document_type:U,file_url:$.url,original_name:$.originalName,mime_type:$.mimeType,file_size:$.fileSize,user_note:$.userNote})}catch($){console.error(`Upload error for ${B.name}:`,$),D.fire({icon:"error",title:"Gagal Upload File",text:`Gagal mengunggah file ${B.name}: ${$.message}`,confirmButtonColor:"#ef4444"});return}}else if(f.value[k]&&f.value[k].length>0)for(const B of f.value[k])s.push({document_type:U,file_url:B.path,original_name:B.name.replace(/\s*\(\d+(?:\.\d+)?\s*MB\)$/,"").trim(),mime_type:"application/pdf",file_size:Math.round(parseFloat(B.size.replace(" MB",""))*1024*1024),user_note:B.user_note||""})}}const t={jenis_pengajuan_id:parseInt(P.value),owner:{nama:x.value.nama,nik:x.value.nik,email:x.value.email,phone:x.value.phone||x.value.no_hp||"",jenis_kelamin:x.value.jenis_kelamin||"L",npwp:x.value.npwp||"",agama:x.value.agama||"",kewarganegaraan:x.value.kewarganegaraan||"WNI",alamat:x.value.alamat||"",pekerjaan:x.value.pekerjaan||"",tanggal_lahir:x.value.tanggal_lahir||"1990-01-01"},lahan:{no_surat_rt:c.value.no_surat_rt||"",jenis_bangunan:c.value.jenis_bangunan,luas_lahan:parseFloat(c.value.luas_lahan),alamat_rt:c.value.alamat_rt||c.value.rt||"",alamat_rw:c.value.alamat_rw||c.value.rw||"",kode_pos:c.value.kode_pos||"",wilayah_kelurahan:c.value.wilayah_kelurahan||c.value.kelurahan||"",wilayah_kecamatan:c.value.wilayah_kecamatan||c.value.kecamatan||"",wilayah_kota:c.value.wilayah_kota||c.value.kota||""},documents:s};console.log("Submitting payload:",t),console.log("Total documents to submit:",s.length);const d=new AbortController,o=setTimeout(()=>d.abort(),3e4);try{const v=await W.post("https://bitwisi.cloud/api/pengajuan",t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},signal:d.signal,timeout:3e4});clearTimeout(o),console.log("Submit response:",v.data),D.fire({icon:"success",title:"Berhasil Dikirim!",text:"Pengajuan Anda berhasil dikirim dan akan segera diproses. Anda akan mendapat notifikasi melalui email mengenai status pengajuan.",confirmButtonColor:"#10b981",confirmButtonText:"Tutup"}).then(()=>{f.value={},y.value={},i.value={},g.value={},x.value=null,c.value=null,P.value="",L.value=null,w.value=1,G()})}catch(v){throw clearTimeout(o),v.name==="AbortError"?new Error("Request timeout - server took too long to respond"):v}}catch(s){console.error("Error submitting documents:",s);let t="Terjadi kesalahan yang tidak diketahui";s.code==="ECONNABORTED"||s.message.includes("timeout")?t="Request timeout - server tidak merespons dalam waktu yang wajar":s.response?t=s.response.data.message||`Server error: ${s.response.status}`:s.request?t="Tidak dapat terhubung ke server":t=s.message,D.fire({icon:"error",title:"Gagal Mengirim Pengajuan",text:t,confirmButtonColor:"#ef4444"})}}};return be(()=>{console.log("Component mounted, fetching pengajuan"),G()}),(s,t)=>(n(),l(A,null,[ke(he),e("div",lt,[e("div",ot,[e("button",{onClick:F,class:"flex items-center gap-2 py-2 rounded mb-3 sm:mb-5 text-sm sm:text-base"},t[1]||(t[1]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1),p(" Kembali ")])),t[55]||(t[55]=e("div",{class:"mb-6 sm:mb-8"},[e("h1",{class:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800 mb-2"}," Persyaratan Izin "),e("p",{class:"text-sm sm:text-base text-gray-600"}," Lengkapi semua langkah berikut untuk mengajukan izin ")],-1)),e("div",rt,[e("div",it,[(n(),l(A,null,N(C,(d,o)=>e("div",{key:o,class:I(["flex items-center",{"sm:flex-1":o<C.length-1}])},[e("div",ut,[e("div",{class:I(["w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-semibold flex-shrink-0",le(o+1)])},[K(o+1)?(n(),l("svg",dt,t[2]||(t[2]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(n(),l("span",mt,m(o+1),1))],2),e("span",{class:I(["ml-2 text-xs sm:text-sm font-medium",{"text-green-600":K(o+1),"text-blue-600":w.value===o+1,"text-gray-500":w.value<o+1&&!K(o+1)}])},m(d.title),3)]),o<C.length-1?(n(),l("div",{key:0,class:I(["hidden sm:flex flex-1 h-px mx-4",{"bg-green-400":K(o+1),"bg-gray-300":!K(o+1)}])},null,2)):b("",!0)],2)),64))])]),z.value?(n(),l("div",pt,t[3]||(t[3]=[e("div",{class:"inline-flex items-center"},[e("div",{class:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-blue-600 mr-3"}),e("p",{class:"text-sm sm:text-base text-gray-600"},"Memuat data pengajuan...")],-1)]))):q.value?(n(),l("div",gt,[e("div",ct,[t[4]||(t[4]=e("svg",{class:"w-8 h-8 sm:w-12 sm:h-12 text-red-400 mx-auto mb-3 sm:mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})],-1)),t[5]||(t[5]=e("p",{class:"text-red-600 font-medium text-sm sm:text-base"},"Terjadi kesalahan",-1)),e("p",xt,m(q.value),1),e("button",{onClick:G,class:"mt-3 sm:mt-4 px-3 sm:px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm rounded-md transition-colors"}," Coba Lagi ")])])):(n(),l("div",vt,[t[54]||(t[54]=e("a",{class:"block bg-blue-600 text-white p-3 sm:p-4 rounded-lg text-center text-sm sm:text-base font-medium hover:bg-blue-700 transition-colors",href:"https://invitations.my.id/uploads/file-1755508254923726040-formatdokumenkelengkapan.docx"}," 📄 Download Template Kelengkapan Dokumen ",-1)),w.value===1?(n(),l("div",ft,[t[15]||(t[15]=e("div",{class:"p-4 sm:p-6 border-b border-gray-100"},[e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 1 "),p(" Pilih Jenis Pengajuan ")]),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"}," Pilih jenis izin yang ingin Anda ajukan ")],-1)),e("div",bt,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[p(" Jenis Pengajuan "),e("span",{class:"text-red-500"})],-1)),e("div",kt,[h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>P.value=d),onChange:ie,class:"w-full bg-white border border-gray-300 rounded-lg px-3 sm:px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"},[t[6]||(t[6]=e("option",{value:""},"Pilih jenis pengajuan...",-1)),(n(!0),l(A,null,N(V.value,d=>(n(),l("option",{key:d.id,value:d.id,disabled:!!d.pengajuan_aktif,class:I({"text-gray-400":!!d.pengajuan_aktif,"text-gray-900":!d.pengajuan_aktif})},m(d.name)+" "+m(d.pengajuan_aktif?` (${E(d.pengajuan_aktif.status)})`:""),11,ht))),128))],544),[[Q,P.value]])]),r.value?(n(),l("div",yt,[t[9]||(t[9]=e("h4",{class:"text-sm font-medium text-blue-800 mb-2"},"Informasi Pengajuan",-1)),e("p",wt,m(r.value.name),1),r.value.description?(n(),l("p",_t,m(r.value.description),1)):b("",!0),e("div",jt,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-blue-800"},"Mohon Siapkan Dokumen Pendukung:",-1)),r.value.Persyaratans&&r.value.Persyaratans.length>0?(n(),l("ul",Pt,[(n(!0),l(A,null,N(r.value.Persyaratans,(d,o)=>(n(),l("li",{key:o,class:"text-xs sm:text-sm text-blue-700 flex items-start"},[t[7]||(t[7]=e("span",{class:"inline-block w-1 h-1 bg-blue-600 rounded-full mt-2 mr-2 flex-shrink-0"},null,-1)),e("span",Ct,m(d),1)]))),128))])):(n(),l("p",Bt," Tidak ada dokumen tambahan yang diperlukan untuk pengajuan ini. "))])])):b("",!0),O.value?(n(),l("div",Lt,[e("div",Mt,[t[13]||(t[13]=e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 mt-0.5 mr-2 sm:mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",$t,[t[11]||(t[11]=e("h3",{class:"text-sm font-medium text-amber-800"}," Ada Pengajuan yang Sedang Diproses ",-1)),t[12]||(t[12]=e("p",{class:"text-xs sm:text-sm text-amber-700 mt-1"}," Beberapa jenis pengajuan tidak dapat dipilih karena Anda memiliki pengajuan aktif yang sedang diproses. ",-1)),e("div",Dt,[t[10]||(t[10]=e("h4",{class:"text-xs font-medium text-amber-800 mb-2"}," Pengajuan yang sedang diproses: ",-1)),e("div",Tt,[(n(!0),l(A,null,N(R.value,d=>(n(),l("div",{key:d.id,class:"bg-white p-3 rounded-md border border-amber-200"},[e("div",Ut,[e("div",zt,[e("p",St,m(d.name),1),e("div",It,[e("span",{class:I(["inline-flex px-2 py-1 rounded text-xs font-medium",ae(d.pengajuan_aktif.status)])},m(E(d.pengajuan_aktif.status)),3),e("span",Vt," ID: "+m(d.pengajuan_aktif.id_pengajuan),1)])])])]))),128))])])])])])):b("",!0)])])):b("",!0),w.value===2?(n(),l("div",At,[t[16]||(t[16]=e("div",{class:"p-4 sm:p-6 border-b border-gray-100"},[e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 2 "),p(" Data Pemilik & Lahan ")]),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"}," Lengkapi data pemilik dan informasi lahan ")],-1)),e("div",Nt,[P.value?(n(),ye(nt,{key:0,idPengajuan:P.value,onOwnerUpdated:oe,onLahanUpdated:re},null,8,["idPengajuan"])):b("",!0)])])):b("",!0),w.value===3?(n(),l("div",Ft,[e("div",Kt,[t[17]||(t[17]=e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 3 "),p(" Upload Dokumen Persyaratan ")],-1)),e("p",qt,m(r.value&&(!r.value.Persyaratans||r.value.Persyaratans.length===0)?"Tidak ada dokumen tambahan yang diperlukan untuk pengajuan ini":"Upload semua dokumen yang diperlukan"),1)]),e("div",Ht,[r.value&&r.value.Persyaratans&&r.value.Persyaratans.length>0?(n(),l("div",Ot,[(n(!0),l(A,null,N(r.value.Persyaratans,(d,o)=>(n(),l("div",{key:o,class:"border border-gray-200 rounded-lg p-4 sm:p-6 hover:border-gray-300 transition-colors"},[e("div",Rt,[e("div",Et,[e("div",Gt,m(o+1),1),e("div",Jt,[e("h3",Wt,m(d),1),t[18]||(t[18]=e("div",{class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 w-fit"},[e("span",{class:"w-1 h-1 bg-red-400 rounded-full mr-1"})]),e("span",{class:"text-xs text-gray-500"},"Maks. 10 MB")],-1))])]),e("div",Yt,[e("div",Qt,[e("button",{onClick:v=>ue(o),class:"inline-flex items-center justify-center px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white rounded-lg text-sm font-medium transition-colors w-full sm:w-auto"},t[19]||(t[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),p(" Pilih File ")]),8,Xt),y.value[o]?(n(),l("div",Zt,[t[20]||(t[20]=e("svg",{class:"w-4 h-4 text-green-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",ea,[e("span",ta,m(y.value[o].name),1),e("span",aa," ("+m((y.value[o].size/(1024*1024)).toFixed(2))+" MB) ",1)])])):b("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catatan Tambahan (Opsional) ",-1)),h(e("textarea",{"onUpdate:modelValue":v=>i.value[o]=v,rows:"2",placeholder:"Tambahkan catatan untuk dokumen ini jika diperlukan...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none"},null,8,sa),[[_,i.value[o]]])]),f.value[o]&&f.value[o].length>0?(n(),l("div",na,[t[25]||(t[25]=e("h4",{class:"text-sm font-medium text-gray-700"},"File yang telah diupload:",-1)),e("div",la,[(n(!0),l(A,null,N(f.value[o],v=>(n(),l("div",{key:v.id,class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("div",oa,[e("div",ra,[t[22]||(t[22]=e("svg",{class:"w-4 h-4 text-gray-400 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",ia,[e("span",ua,m(v.name),1),e("span",da,"("+m(v.size)+")",1)])]),e("button",{onClick:k=>me(o,v.id),class:"text-red-500 hover:text-red-700 p-1 ml-2 flex-shrink-0",title:"Hapus file"},t[23]||(t[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ma)]),v.user_note?(n(),l("div",pa,[t[24]||(t[24]=e("strong",null,"Catatan:",-1)),p(" "+m(v.user_note),1)])):b("",!0)]))),128))])])):b("",!0)])])]))),128))])):r.value&&(!r.value.Persyaratans||r.value.Persyaratans.length===0)?(n(),l("div",ga,[e("div",ca,[t[26]||(t[26]=e("svg",{class:"w-8 h-8 sm:w-12 sm:h-12 text-green-400 mx-auto mb-3 sm:mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[27]||(t[27]=e("h3",{class:"text-base sm:text-lg font-medium text-green-800 mb-2"}," Tidak Ada Dokumen Tambahan ",-1)),e("p",xa,' Pengajuan "'+m(r.value.name)+'" tidak memerlukan dokumen tambahan. Anda dapat langsung melanjutkan ke langkah berikutnya. ',1)])])):b("",!0)])])):b("",!0),w.value===4?(n(),l("div",va,[t[51]||(t[51]=e("div",{class:"p-4 sm:p-6 border-b border-gray-100"},[e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 4 "),p(" Review & Submit ")]),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"}," Periksa kembali semua data sebelum mengirim pengajuan ")],-1)),e("div",fa,[e("div",ba,[t[28]||(t[28]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Jenis Pengajuan",-1)),e("p",ka,m(r.value?.name),1)]),M.value?(n(),l("div",ha,[t[33]||(t[33]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Data Pemilik",-1)),e("div",ya,[e("div",wa,[t[29]||(t[29]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"Nama:",-1)),e("span",_a,m(x.value.nama),1)]),e("div",ja,[t[30]||(t[30]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"NIK:",-1)),e("span",Pa,m(x.value.nik),1)]),e("div",Ca,[t[31]||(t[31]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"Email:",-1)),e("span",Ba,m(x.value.email),1)]),x.value.phone||x.value.no_hp?(n(),l("div",La,[t[32]||(t[32]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"Telepon:",-1)),e("span",Ma,m(x.value.phone||x.value.no_hp),1)])):b("",!0)])])):b("",!0),a.value?(n(),l("div",$a,[t[38]||(t[38]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Data Lahan",-1)),e("div",Da,[e("div",Ta,[t[34]||(t[34]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Jenis Bangunan:",-1)),e("span",Ua,m(c.value.jenis_bangunan),1)]),e("div",za,[t[35]||(t[35]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Luas Lahan:",-1)),e("span",Sa,m(c.value.luas_lahan)+" m²",1)]),c.value.kelurahan||c.value.wilayah_kelurahan?(n(),l("div",Ia,[t[36]||(t[36]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Kelurahan:",-1)),e("span",Va,m(c.value.kelurahan||c.value.wilayah_kelurahan),1)])):b("",!0),c.value.kecamatan||c.value.wilayah_kecamatan?(n(),l("div",Aa,[t[37]||(t[37]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Kecamatan:",-1)),e("span",Na,m(c.value.kecamatan||c.value.wilayah_kecamatan),1)])):b("",!0)])])):b("",!0),r.value&&r.value.Persyaratans&&r.value.Persyaratans.length>0?(n(),l("div",Fa,[t[45]||(t[45]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Dokumen yang Akan Disubmit",-1)),e("div",Ka,[(n(!0),l(A,null,N(r.value.Persyaratans,(d,o)=>(n(),l("div",{key:o,class:"flex items-start justify-between p-2 sm:p-3 bg-gray-50 rounded-md"},[e("div",qa,[e("p",Ha,m(d),1),y.value[o]?(n(),l("div",Oa,[t[40]||(t[40]=e("span",{class:"font-medium"},"File:",-1)),e("span",Ra,m(y.value[o].name),1),i.value[o]?(n(),l("div",Ea,[t[39]||(t[39]=e("span",{class:"font-medium"},"Catatan:",-1)),p(" "+m(i.value[o]),1)])):b("",!0)])):f.value[o]&&f.value[o].length>0?(n(),l("div",Ga,[t[42]||(t[42]=e("span",{class:"font-medium"},"File:",-1)),e("span",Ja,m(f.value[o][0].name),1),f.value[o][0].user_note?(n(),l("div",Wa,[t[41]||(t[41]=e("span",{class:"font-medium"},"Catatan:",-1)),p(" "+m(f.value[o][0].user_note),1)])):b("",!0)])):b("",!0)]),e("div",Ya,[y.value[o]||f.value[o]&&f.value[o].length>0?(n(),l("svg",Qa,t[43]||(t[43]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(n(),l("svg",Xa,t[44]||(t[44]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])))])]))),128))])])):b("",!0),u.value?b("",!0):(n(),l("div",Za,[e("div",es,[t[47]||(t[47]=e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 mt-0.5 mr-2 sm:mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",ts,[t[46]||(t[46]=e("h3",{class:"text-sm font-medium text-amber-800"},"Data Belum Lengkap",-1)),e("div",as,[M.value?b("",!0):(n(),l("p",ss,"• Data pemilik belum lengkap")),a.value?b("",!0):(n(),l("p",ns,"• Data lahan belum lengkap"))])])])])),e("div",ls,[e("button",{onClick:pe,disabled:!u.value,class:"w-full px-4 sm:px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center justify-center text-sm sm:text-base"},[u.value?(n(),l("svg",is,t[49]||(t[49]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)]))):(n(),l("svg",rs,t[48]||(t[48]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)]))),p(" "+m(!r.value?.Persyaratans||r.value.Persyaratans.length===0?"Kirim Pengajuan":"Kirim Pengajuan & Dokumen"),1)],8,os),t[50]||(t[50]=e("p",{class:"text-xs text-gray-500 text-center mt-2 px-2"}," Dengan mengirim pengajuan ini, Anda menyetujui bahwa semua data yang diberikan adalah benar dan akurat. ",-1))])])])):b("",!0),e("div",us,[w.value>1?(n(),l("button",{key:0,onClick:ne,class:"inline-flex items-center justify-center px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors text-sm sm:text-base order-2 sm:order-1"},t[52]||(t[52]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),p(" Sebelumnya ")]))):(n(),l("div",ds)),w.value<te&&Z.value?(n(),l("button",{key:2,onClick:se,class:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors text-sm sm:text-base order-1 sm:order-2"},t[53]||(t[53]=[p(" Selanjutnya "),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):b("",!0)])]))])])],64))}};export{ps as default};
