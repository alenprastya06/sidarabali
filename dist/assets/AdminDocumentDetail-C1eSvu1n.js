import{a as z,m as B,r as n,o as $,p as S,c as l,b as a,d as e,t as r,g as A,n as f,l as v,w as h,q as V,v as N,e as K,s as L,x as y}from"./index--Gagy8kk.js";const T={class:"min-h-screen bg-gray-50 p-8 antialiased"},U={class:"bg-white p-8 rounded-xl shadow-lg border border-gray-100 w-full max-w-3xl mx-auto"},H={key:0,class:"text-center text-gray-600 py-10"},G={key:1,class:"text-center bg-red-100 text-red-700 p-4 rounded-lg border border-red-200"},I={key:2},R={class:"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8 mb-6"},q={class:"text-gray-900 text-base font-medium"},E={class:"text-gray-900 text-base font-medium"},O={class:"text-gray-900 text-base font-medium"},P=["href"],W={class:"mb-6 bg-blue-50 p-4 rounded-lg border border-blue-200"},F={for:"isComplete",class:"block text-blue-800 text-sm font-bold mb-2 cursor-pointer"},J={class:"mb-8"},Q={class:"flex flex-col sm:flex-row justify-end space-y-4 sm:space-y-0 sm:space-x-4"},X=["disabled"],Y={key:0,class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Z={key:1,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ee=["disabled"],te={key:0,class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oe={key:1,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},se={key:3,class:"text-center text-gray-600 py-10"},le={class:"mt-10 text-center"},_="http://localhost:3001/api/documents",re={__name:"AdminDocumentDetail",setup(ae){const C=z(),k=B(),o=n(null),x=n(!0),g=n(null),m=n(""),u=n(!1),i=n(!1),d=n(null),c=n(null),b=n(!1),j=async()=>{x.value=!0,g.value=null;try{const s=await y.get(`${_}/${C.params.id}`,{headers:{Authorization:`Bearer ${k.token}`}});o.value=s.data,m.value=o.value.admin_notes||"",u.value=o.value.is_complete||!1}catch(s){g.value=s.response?.data?.message||"Gagal mengambil detail dokumen.",console.error("Kesalahan mengambil detail dokumen:",s)}finally{x.value=!1}},w=async s=>{i.value=!0,d.value=s,c.value=null,b.value=!1;try{await y.put(`${_}/${o.value.id}/status`,{status:s,admin_notes:m.value,is_complete:u.value},{headers:{Authorization:`Bearer ${k.token}`}}),o.value.status=s,o.value.admin_notes=m.value,o.value.is_complete=u.value,c.value=`Dokumen berhasil ${s==="approved"?"disetujui":"ditolak"}.`,b.value=!0}catch(t){c.value=t.response?.data?.message||`Gagal ${s==="approved"?"menyetujui":"menolak"} dokumen.`,b.value=!1,console.error(`Kesalahan memperbarui status dokumen menjadi ${s}:`,t)}finally{i.value=!1,d.value=null}},D=s=>{switch(s){case"approved":return"bg-emerald-100 text-emerald-700 border border-emerald-200";case"rejected":return"bg-rose-100 text-rose-700 border border-rose-200";case"pending":default:return"bg-amber-100 text-amber-700 border border-amber-200"}};return $(()=>{j()}),(s,t)=>{const M=S("router-link");return a(),l("div",T,[e("div",U,[t[19]||(t[19]=e("h2",{class:"text-3xl font-extrabold text-gray-900 mb-8 text-center"},"Detail Dokumen",-1)),x.value?(a(),l("div",H,t[4]||(t[4]=[e("svg",{class:"animate-spin h-8 w-8 text-blue-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-3 text-lg"},"Memuat detail dokumen...",-1)]))):g.value?(a(),l("div",G,[t[5]||(t[5]=e("p",{class:"font-semibold"},"Terjadi Kesalahan:",-1)),e("p",null,r(g.value),1)])):o.value?(a(),l("div",I,[e("div",R,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-gray-700 text-sm font-semibold mb-1"},"Nama Berkas:",-1)),e("p",q,r(o.value.file_name),1)]),e("div",null,[t[7]||(t[7]=e("p",{class:"text-gray-700 text-sm font-semibold mb-1"},"Diunggah Oleh:",-1)),e("p",E,r(o.value.username),1)]),e("div",null,[t[8]||(t[8]=e("p",{class:"text-gray-700 text-sm font-semibold mb-1"},"Waktu Unggah:",-1)),e("p",O,r(new Date(o.value.uploaded_at).toLocaleString()),1)]),e("div",null,[t[9]||(t[9]=e("p",{class:"text-gray-700 text-sm font-semibold mb-1"},"Status Saat Ini:",-1)),e("span",{class:f([D(o.value.status),"py-1.5 px-3 rounded-full text-xs font-semibold border"])},r(o.value.status),3)])]),e("a",{href:`http://localhost:3001/uploads/${o.value.file_name}`,target:"_blank",class:"inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mb-8 w-full md:w-auto"},t[10]||(t[10]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),v(" Lihat Dokumen ")]),8,P),e("div",W,[e("label",F,[h(e("input",{type:"checkbox",id:"isComplete","onUpdate:modelValue":t[0]||(t[0]=p=>u.value=p),class:"mr-3 h-5 w-5 text-blue-600 focus:ring-blue-500 border-blue-300 rounded-md transition duration-150 ease-in-out transform scale-110"},null,512),[[V,u.value]]),t[11]||(t[11]=v(" Kelengkapan Dokumen: ")),e("span",{class:f(["ml-2 font-semibold",u.value?"text-green-700":"text-red-700"])},r(u.value?"Dokumen Lengkap":"Dokumen Belum Lengkap"),3)])]),e("div",J,[t[12]||(t[12]=e("label",{for:"adminNotes",class:"block text-gray-700 text-sm font-bold mb-2"},"Catatan Admin:",-1)),h(e("textarea",{id:"adminNotes","onUpdate:modelValue":t[1]||(t[1]=p=>m.value=p),rows:"5",class:"block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-800 transition duration-200 resize-y",placeholder:"Tambahkan catatan atau observasi terkait dokumen ini..."},null,512),[[N,m.value]])]),e("div",Q,[e("button",{onClick:t[2]||(t[2]=p=>w("approved")),class:"inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:i.value},[i.value&&d.value==="approved"?(a(),l("svg",Y,t[13]||(t[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(a(),l("svg",Z,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))),v(" "+r(i.value&&d.value==="approved"?"Menyetujui...":"Setujui Dokumen"),1)],8,X),e("button",{onClick:t[3]||(t[3]=p=>w("rejected")),class:"inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",disabled:i.value},[i.value&&d.value==="rejected"?(a(),l("svg",te,t[15]||(t[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(a(),l("svg",oe,t[16]||(t[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))),v(" "+r(i.value&&d.value==="rejected"?"Menolak...":"Tolak Dokumen"),1)],8,ee)]),c.value?(a(),l("div",{key:0,class:f([b.value?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200","mt-6 p-4 rounded-lg text-center font-medium"])},r(c.value),3)):A("",!0)])):(a(),l("div",se,t[17]||(t[17]=[e("p",{class:"text-lg"},"Dokumen tidak ditemukan.",-1)]))),e("div",le,[K(M,{to:"/admin/dashboard",class:"inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold transition duration-200 hover:underline"},{default:L(()=>t[18]||(t[18]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})],-1),v(" Kembali ke Dasbor Admin ")])),_:1,__:[18]})])])])}}};export{re as default};
