import{G as ce,r as j,i as U,C as ve,c as l,b as n,e,g as b,l as p,t as m,n as I,D as ee,w as h,v as _,H as Q,k as xe,u as fe,o as be,d as ke,f as he,F as A,h as N,A as ye,x as Y,S as M,I as we}from"./index-DEnaVPft.js";const _e={class:"bg-gray-50"},je={class:"container mx-auto max-w-7xl"},Pe={class:"mb-6"},Ce={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Be={class:"flex items-center justify-between"},Le={class:"flex items-center space-x-4"},Me={class:"text-sm text-gray-500 mt-1"},$e={key:0,class:"text-green-600 ml-2"},De={key:1,class:"text-red-500 ml-2"},Ue={class:"flex items-center space-x-3"},Se={class:"text-sm text-gray-500"},ze={key:0,class:"px-6 pb-6 border-t border-gray-100"},Te={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ie={class:"lg:col-span-2"},Ve={class:"lg:col-span-2"},Ae={class:"mb-8"},Ne={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Fe={class:"flex items-center justify-between"},Ke={class:"flex items-center space-x-4"},qe={class:"text-sm text-gray-500 mt-1"},He={key:0,class:"text-green-600 ml-2"},Oe={key:1,class:"text-red-500 ml-2"},Ee={class:"flex items-center space-x-3"},Re={class:"text-sm text-gray-500"},Ge={key:0,class:"px-6 pb-6 border-t border-gray-100"},Je={class:"mb-8"},We={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ye={class:"mb-8"},Qe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Xe={class:"mb-8"},Ze={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ea={class:"flex items-center"},aa={key:0,class:"w-5 h-5 mr-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ta={key:1,class:"w-5 h-5 mr-3 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sa={class:"font-medium"},na={__name:"PemiliDanLahan",props:{idPengajuan:{type:[Number,String],default:null}},emits:["owner-updated","lahan-updated"],setup(X,{emit:V}){const C=X,z=V,q=ce("selectedPengajuanId",null),T=j(!1),x=j(!1),y=j(null),u=j({nik:"",email:"",phone:"",jenis_kelamin:"L",nama:"",npwp:"",tanggal_lahir:"",agama:"",kewarganegaraan:"Indonesia",alamat:"",pekerjaan:""}),c=j({no_surat_rt:"",jenis_bangunan:"",luas_lahan:0,alamat_rt:"",alamat_rw:"",kode_pos:"",wilayah_kelurahan:"",wilayah_kecamatan:"",wilayah_kota:""}),L=U(()=>u.value.nama&&u.value.nik&&u.value.email&&u.value.phone&&u.value.jenis_kelamin&&u.value.tanggal_lahir&&u.value.agama&&u.value.kewarganegaraan&&u.value.alamat&&u.value.pekerjaan),f=U(()=>c.value.no_surat_rt&&c.value.jenis_bangunan&&c.value.luas_lahan>0&&c.value.alamat_rt&&c.value.alamat_rw&&c.value.kode_pos&&c.value.wilayah_kelurahan&&c.value.wilayah_kecamatan&&c.value.wilayah_kota),v=()=>{u.value={nik:"",email:"",phone:"",jenis_kelamin:"L",nama:"",npwp:"",tanggal_lahir:"",agama:"",kewarganegaraan:"Indonesia",alamat:"",pekerjaan:""},c.value={no_surat_rt:"",jenis_bangunan:"",luas_lahan:0,alamat_rt:"",alamat_rw:"",kode_pos:"",wilayah_kelurahan:"",wilayah_kecamatan:"",wilayah_kota:""},z("owner-updated",null),z("lahan-updated",null)},w=()=>{T.value=!T.value},O=()=>{x.value=!x.value},F=($,t)=>{y.value={type:$,text:t},setTimeout(()=>{y.value=null},5e3)},P=()=>{L.value?z("owner-updated",{...u.value}):z("owner-updated",null)},o=()=>{f.value?z("lahan-updated",{...c.value}):z("lahan-updated",null)},E=async()=>{L.value?(F("success","Data pemilik telah divalidasi dan siap disimpan!"),P()):F("error","Harap lengkapi semua field yang wajib diisi.")},R=async()=>{f.value?(F("success","Data lahan telah divalidasi dan siap disimpan!"),o()):F("error","Harap lengkapi semua field yang wajib diisi.")};return ve(()=>C.idPengajuan||q?.value,$=>{$||v()},{immediate:!0}),($,t)=>(n(),l("div",_e,[e("div",je,[e("div",Pe,[e("div",Ce,[e("button",{onClick:w,class:"w-full px-6 py-5 text-left hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"},[e("div",Be,[e("div",Le,[t[22]||(t[22]=e("div",{class:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[t[21]||(t[21]=e("h2",{class:"text-xl font-semibold text-gray-800"},"Data Pemilik Lahan",-1)),e("p",Me,[t[20]||(t[20]=p(" Informasi pribadi pemilik lahan ")),L.value?(n(),l("span",$e,"✓ Lengkap")):(n(),l("span",De,"⚠ Belum lengkap"))])])]),e("div",Ue,[e("span",Se,m(T.value?"Tutup":"Buka")+" Form ",1),(n(),l("svg",{class:I([{"rotate-180":T.value},"w-5 h-5 text-gray-400 transition-transform duration-200"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])]),T.value?(n(),l("div",ze,[e("form",{onSubmit:ee(E,["prevent"]),class:"mt-6"},[e("div",Te,[e("div",null,[t[24]||(t[24]=e("label",{for:"owner_nama",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Nama Lengkap "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_nama","onUpdate:modelValue":t[0]||(t[0]=i=>u.value.nama=i),onInput:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan nama lengkap",required:""},null,544),[[_,u.value.nama]])]),e("div",null,[t[25]||(t[25]=e("label",{for:"owner_nik",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" NIK (Nomor Induk Kependudukan) "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_nik","onUpdate:modelValue":t[1]||(t[1]=i=>u.value.nik=i),onInput:P,maxlength:"16",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"16 digit NIK",required:""},null,544),[[_,u.value.nik]])]),e("div",null,[t[26]||(t[26]=e("label",{for:"owner_tanggal_lahir",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Tanggal Lahir "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"date",id:"owner_tanggal_lahir","onUpdate:modelValue":t[2]||(t[2]=i=>u.value.tanggal_lahir=i),onChange:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},null,544),[[_,u.value.tanggal_lahir]])]),e("div",null,[t[28]||(t[28]=e("label",{for:"owner_jenis_kelamin",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Jenis Kelamin "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{id:"owner_jenis_kelamin","onUpdate:modelValue":t[3]||(t[3]=i=>u.value.jenis_kelamin=i),onChange:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},t[27]||(t[27]=[e("option",{value:"L"},"Laki-laki",-1),e("option",{value:"P"},"Perempuan",-1)]),544),[[Q,u.value.jenis_kelamin]])]),e("div",null,[t[30]||(t[30]=e("label",{for:"owner_agama",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Agama "),e("span",{class:"text-red-500"},"*")],-1)),h(e("select",{id:"owner_agama","onUpdate:modelValue":t[4]||(t[4]=i=>u.value.agama=i),onChange:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},t[29]||(t[29]=[xe('<option value="" disabled>Pilih Agama</option><option value="Islam">Islam</option><option value="Kristen">Kristen</option><option value="Katolik">Katolik</option><option value="Hindu">Hindu</option><option value="Buddha">Buddha</option><option value="Konghucu">Konghucu</option>',7)]),544),[[Q,u.value.agama]])]),e("div",null,[t[31]||(t[31]=e("label",{for:"owner_kewarganegaraan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kewarganegaraan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_kewarganegaraan","onUpdate:modelValue":t[5]||(t[5]=i=>u.value.kewarganegaraan=i),onInput:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:""},null,544),[[_,u.value.kewarganegaraan]])]),e("div",null,[t[32]||(t[32]=e("label",{for:"owner_pekerjaan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Pekerjaan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"owner_pekerjaan","onUpdate:modelValue":t[6]||(t[6]=i=>u.value.pekerjaan=i),onInput:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan pekerjaan",required:""},null,544),[[_,u.value.pekerjaan]])]),e("div",null,[t[33]||(t[33]=e("label",{for:"owner_email",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Email "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"email",id:"owner_email","onUpdate:modelValue":t[7]||(t[7]=i=>u.value.email=i),onInput:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"contoh@email.com",required:""},null,544),[[_,u.value.email]])]),e("div",null,[t[34]||(t[34]=e("label",{for:"owner_phone",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Nomor Telepon "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"tel",id:"owner_phone","onUpdate:modelValue":t[8]||(t[8]=i=>u.value.phone=i),onInput:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"08xxxxxxxxxx",required:""},null,544),[[_,u.value.phone]])]),e("div",Ie,[t[35]||(t[35]=e("label",{for:"owner_alamat",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Alamat "),e("span",{class:"text-red-500"},"*")],-1)),h(e("textarea",{id:"owner_alamat","onUpdate:modelValue":t[9]||(t[9]=i=>u.value.alamat=i),onInput:P,rows:"3",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Masukkan alamat lengkap sesuai KTP",required:""},null,544),[[_,u.value.alamat]])]),e("div",Ve,[t[36]||(t[36]=e("label",{for:"owner_npwp",class:"block text-sm font-medium text-gray-700 mb-2"}," NPWP (Opsional) ",-1)),h(e("input",{type:"text",id:"owner_npwp","onUpdate:modelValue":t[10]||(t[10]=i=>u.value.npwp=i),onInput:P,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"15 digit NPWP (jika ada)"},null,544),[[_,u.value.npwp]])])]),t[37]||(t[37]=e("div",{class:"mt-8 flex justify-end"},[e("div",{class:"text-sm text-gray-500"}," Data akan disimpan otomatis saat submit dokumen ")],-1))],32)])):b("",!0)])]),e("div",Ae,[e("div",Ne,[e("button",{onClick:O,class:"w-full px-6 py-5 text-left hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"},[e("div",Fe,[e("div",Ke,[t[40]||(t[40]=e("div",{class:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("div",null,[t[39]||(t[39]=e("h2",{class:"text-xl font-semibold text-gray-800"},"Data Lahan",-1)),e("p",qe,[t[38]||(t[38]=p(" Informasi lokasi dan detail lahan ")),f.value?(n(),l("span",He,"✓ Lengkap")):(n(),l("span",Oe,"⚠ Belum lengkap"))])])]),e("div",Ee,[e("span",Re,m(x.value?"Tutup":"Buka")+" Form ",1),(n(),l("svg",{class:I([{"rotate-180":x.value},"w-5 h-5 text-gray-400 transition-transform duration-200"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[41]||(t[41]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])]),x.value?(n(),l("div",Ge,[e("form",{onSubmit:ee(R,["prevent"]),class:"mt-6"},[e("div",Je,[t[43]||(t[43]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),p(" Informasi Dokumen ")],-1)),e("div",We,[e("div",null,[t[42]||(t[42]=e("label",{for:"lahan_no_surat_rt",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Nomor Surat RT "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_no_surat_rt","onUpdate:modelValue":t[11]||(t[11]=i=>c.value.no_surat_rt=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nomor surat dari RT",required:""},null,544),[[_,c.value.no_surat_rt]])])])]),e("div",Ye,[t[46]||(t[46]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),p(" Detail Lahan & Bangunan ")],-1)),e("div",Qe,[e("div",null,[t[44]||(t[44]=e("label",{for:"lahan_jenis_bangunan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Jenis Bangunan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_jenis_bangunan","onUpdate:modelValue":t[12]||(t[12]=i=>c.value.jenis_bangunan=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Contoh: Rumah Tinggal, Ruko, dll",required:""},null,544),[[_,c.value.jenis_bangunan]])]),e("div",null,[t[45]||(t[45]=e("label",{for:"lahan_luas_lahan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Luas Lahan (m²) "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"number",step:"0.1",id:"lahan_luas_lahan","onUpdate:modelValue":t[13]||(t[13]=i=>c.value.luas_lahan=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Contoh: 120.5",required:""},null,544),[[_,c.value.luas_lahan,void 0,{number:!0}]])])])]),e("div",Xe,[t[53]||(t[53]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]),p(" Alamat Lahan ")],-1)),e("div",Ze,[e("div",null,[t[47]||(t[47]=e("label",{for:"lahan_alamat_rt",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" RT "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_alamat_rt","onUpdate:modelValue":t[14]||(t[14]=i=>c.value.alamat_rt=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"001",required:""},null,544),[[_,c.value.alamat_rt]])]),e("div",null,[t[48]||(t[48]=e("label",{for:"lahan_alamat_rw",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" RW "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_alamat_rw","onUpdate:modelValue":t[15]||(t[15]=i=>c.value.alamat_rw=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"001",required:""},null,544),[[_,c.value.alamat_rw]])]),e("div",null,[t[49]||(t[49]=e("label",{for:"lahan_kode_pos",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kode Pos "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_kode_pos","onUpdate:modelValue":t[16]||(t[16]=i=>c.value.kode_pos=i),onInput:o,maxlength:"5",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"12345",required:""},null,544),[[_,c.value.kode_pos]])]),e("div",null,[t[50]||(t[50]=e("label",{for:"lahan_wilayah_kelurahan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kelurahan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_wilayah_kelurahan","onUpdate:modelValue":t[17]||(t[17]=i=>c.value.wilayah_kelurahan=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nama kelurahan",required:""},null,544),[[_,c.value.wilayah_kelurahan]])]),e("div",null,[t[51]||(t[51]=e("label",{for:"lahan_wilayah_kecamatan",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kecamatan "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_wilayah_kecamatan","onUpdate:modelValue":t[18]||(t[18]=i=>c.value.wilayah_kecamatan=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nama kecamatan",required:""},null,544),[[_,c.value.wilayah_kecamatan]])]),e("div",null,[t[52]||(t[52]=e("label",{for:"lahan_wilayah_kota",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Kota/Kabupaten "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{type:"text",id:"lahan_wilayah_kota","onUpdate:modelValue":t[19]||(t[19]=i=>c.value.wilayah_kota=i),onInput:o,class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Nama kota/kabupaten",required:""},null,544),[[_,c.value.wilayah_kota]])])])]),t[54]||(t[54]=e("div",{class:"flex justify-end"},[e("div",{class:"text-sm text-gray-500"}," Data akan disimpan otomatis saat submit dokumen ")],-1))],32)])):b("",!0)])]),y.value?(n(),l("div",{key:0,class:I(["fixed bottom-6 right-6 max-w-md p-4 rounded-lg shadow-lg z-50 transition-all duration-300",y.value.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"])},[e("div",ea,[y.value.type==="success"?(n(),l("svg",aa,t[55]||(t[55]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(n(),l("svg",ta,t[56]||(t[56]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"},null,-1)]))),e("span",sa,m(y.value.text),1)])],2)):b("",!0)])]))}},la={class:"min-h-screen bg-gray-50"},oa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ra={class:"mb-6 sm:mb-8"},ia={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-0"},ua={class:"flex items-center w-full sm:w-auto"},da={key:0,class:"w-3 h-3 sm:w-5 sm:h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},ma={key:1,class:"text-xs sm:text-sm"},pa={key:0,class:"text-center py-8 sm:py-12"},ga={key:1,class:"text-center py-8 sm:py-12"},ca={class:"bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6 max-w-md mx-auto"},va={class:"text-red-500 text-xs sm:text-sm mt-1"},xa={key:2,class:"space-y-4 sm:space-y-6"},fa={key:0,class:"bg-white rounded-lg shadow-sm border"},ba={class:"p-4 sm:p-6"},ka={class:"relative"},ha=["value","disabled"],ya={key:0,class:"mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-100"},wa={class:"text-sm text-blue-700 font-medium"},_a={key:0,class:"text-xs text-blue-600 mt-1"},ja={class:"mt-4"},Pa={key:0,class:"mt-2 space-y-1"},Ca={class:"capitalize"},Ba={key:1,class:"text-sm text-blue-700 mt-2"},La={key:1,class:"mt-4 sm:mt-6 bg-amber-50 border border-amber-200 rounded-lg p-3 sm:p-4"},Ma={class:"flex items-start"},$a={class:"flex-1 min-w-0"},Da={class:"mt-3"},Ua={class:"space-y-2"},Sa={class:"space-y-2 sm:space-y-0 sm:flex sm:items-center sm:justify-between"},za={class:"flex-1 min-w-0"},Ta={class:"text-sm text-gray-800 font-medium truncate"},Ia={class:"flex flex-col sm:flex-row sm:items-center mt-1 gap-1 sm:gap-2"},Va={class:"text-xs text-gray-500"},Aa={key:1,class:"bg-white rounded-lg shadow-sm border"},Na={class:"p-4 sm:p-6"},Fa={key:2,class:"bg-white rounded-lg shadow-sm border"},Ka={class:"p-4 sm:p-6 border-b border-gray-100"},qa={class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"},Ha={class:"p-4 sm:p-6"},Oa={key:0,class:"space-y-4 sm:space-y-6"},Ea={class:"space-y-4"},Ra={class:"flex items-start"},Ga={class:"w-6 h-6 sm:w-8 sm:h-8 bg-gray-100 text-gray-700 rounded-full flex items-center justify-center text-xs sm:text-sm font-semibold mr-3 sm:mr-4 flex-shrink-0 mt-1"},Ja={class:"flex-1 min-w-0"},Wa={class:"text-sm sm:text-base text-gray-900 font-medium mb-2 capitalize"},Ya={class:"space-y-4 ml-9 sm:ml-12"},Qa={class:"flex flex-col sm:flex-row sm:items-center gap-3"},Xa=["onClick"],Za={key:0,class:"flex items-center bg-green-50 border border-green-200 rounded-lg px-3 py-2 w-full sm:w-auto sm:flex-1"},et={class:"flex-1 min-w-0"},at={class:"text-sm text-green-700 font-medium block truncate"},tt={class:"text-xs text-green-600"},st=["onUpdate:modelValue"],nt={key:0,class:"space-y-3"},lt={class:"space-y-2"},ot={class:"flex items-center justify-between"},rt={class:"flex items-center flex-1 min-w-0"},it={class:"flex-1 min-w-0"},ut={class:"text-sm text-gray-700 font-medium block truncate"},dt={class:"text-xs text-gray-500"},mt=["onClick"],pt={key:0,class:"mt-2 text-xs text-gray-600 bg-gray-100 p-2 rounded"},gt={key:1,class:"text-center py-8 sm:py-12"},ct={class:"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6 max-w-md mx-auto"},vt={class:"text-sm text-green-700"},xt={key:3,class:"bg-white rounded-lg shadow-sm border"},ft={class:"p-4 sm:p-6 space-y-4 sm:space-y-6"},bt={class:"border border-gray-200 rounded-lg p-3 sm:p-4"},kt={class:"text-sm sm:text-base text-gray-900"},ht={key:0,class:"border border-gray-200 rounded-lg p-3 sm:p-4"},yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 text-sm"},wt={class:"flex flex-col sm:flex-row sm:items-center"},_t={class:"font-medium text-sm"},jt={class:"flex flex-col sm:flex-row sm:items-center"},Pt={class:"font-medium text-sm"},Ct={class:"flex flex-col sm:flex-row sm:items-center"},Bt={class:"font-medium text-sm break-all"},Lt={key:0,class:"flex flex-col sm:flex-row sm:items-center"},Mt={class:"font-medium text-sm"},$t={key:1,class:"border border-gray-200 rounded-lg p-3 sm:p-4"},Dt={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 text-sm"},Ut={class:"flex flex-col sm:flex-row sm:items-center"},St={class:"font-medium text-sm"},zt={class:"flex flex-col sm:flex-row sm:items-center"},Tt={class:"font-medium text-sm"},It={key:0,class:"flex flex-col sm:flex-row sm:items-center"},Vt={class:"font-medium text-sm"},At={key:1,class:"flex flex-col sm:flex-row sm:items-center"},Nt={class:"font-medium text-sm"},Ft={key:2,class:"border border-gray-200 rounded-lg p-3 sm:p-4"},Kt={class:"space-y-2 sm:space-y-3"},qt={class:"flex-1 min-w-0 mr-3"},Ht={class:"text-sm font-medium text-gray-900 capitalize mb-1"},Ot={key:0,class:"text-xs text-gray-600"},Et={class:"truncate"},Rt={key:0,class:"mt-1"},Gt={key:1,class:"text-xs text-gray-600"},Jt={class:"truncate"},Wt={key:0,class:"mt-1"},Yt={class:"flex items-center ml-2 flex-shrink-0"},Qt={key:0,class:"w-4 h-4 sm:w-5 sm:h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},Xt={key:1,class:"w-4 h-4 sm:w-5 sm:h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},Zt={key:3,class:"bg-amber-50 border border-amber-200 rounded-lg p-3 sm:p-4"},es={class:"flex items-start"},as={class:"flex-1"},ts={class:"text-sm text-amber-700 mt-1 space-y-1"},ss={key:0},ns={key:1},ls={key:2},os={class:"border-t border-gray-100 pt-4 sm:pt-6"},rs=["disabled"],is={key:0,class:"w-4 h-4 sm:w-5 sm:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},us={key:1,class:"w-4 h-4 sm:w-5 sm:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ds={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-4 sm:pt-6 gap-3 sm:gap-0"},ms={key:1,class:"hidden sm:block"},ae=4,gs={__name:"HalamanPermohonan",setup(X){const V=j([]),C=j(""),z=j(!0),q=j(null),T=localStorage.getItem("token");parseInt(localStorage.getItem("id"));const x=j({}),y=j({}),u=j({}),c=j({}),L=j(null),f=j(null),v=j(null),w=j(1),O=fe(),F=()=>{O.back()},P=[{title:"Pilih Pengajuan",description:"Pilih jenis izin yang akan diajukan"},{title:"Data Pemilik & Lahan",description:"Lengkapi informasi pemilik dan lahan"},{title:"Upload Dokumen",description:"Upload dokumen persyaratan"},{title:"Review & Submit",description:"Periksa dan kirim pengajuan"}];we("selectedPengajuanId",C);const o=U(()=>{const s=V.value.find(a=>a.id===C.value);return s&&!Array.isArray(s.Persyaratans)&&(s.Persyaratans=[]),s&&s.name.trim().toLowerCase()==="standar pelayanan kelengkapan administrasi permohonan rekomendasi hak atas tanah"&&L.value===!0&&(s.Persyaratans=s.Persyaratans.filter(a=>a.toLowerCase()!=="surat keterangan dari kecamatan")),s}),E=U(()=>V.value.some(s=>s.pengajuan_aktif)),R=U(()=>V.value.filter(s=>s.pengajuan_aktif));U(()=>!1);const $=U(()=>f.value&&f.value.nama&&f.value.nik&&f.value.email),t=U(()=>v.value&&v.value.jenis_bangunan&&v.value.luas_lahan),i=U(()=>{if(!o.value?.Persyaratans||o.value.Persyaratans.length===0)return!1;for(let s=0;s<o.value.Persyaratans.length;s++){const a=y.value[s],d=x.value[s]&&x.value[s].length>0;if(!a&&!d)return!0}return!1}),H=U(()=>!o.value||!$.value||!t.value?!1:!o.value.Persyaratans||o.value.Persyaratans.length===0?!0:!i.value),Z=U(()=>{switch(w.value){case 1:return C.value&&!o.value?.pengajuan_aktif;case 2:return $.value&&t.value;case 3:return!i.value;default:return!0}}),G=s=>({menunggu_perbaikan:"Menunggu Perbaikan",dalam_proses:"Dalam Proses",menunggu_verifikasi:"Menunggu Verifikasi",pending:"Pending",ditinjau:"Sedang Ditinjau",disetujui:"Disetujui",ditolak:"Ditolak",selesai:"Selesai"})[s]||s.charAt(0).toUpperCase()+s.slice(1).replace(/_/g," "),te=s=>({menunggu_perbaikan:"bg-amber-100 text-amber-800",dalam_proses:"bg-blue-100 text-blue-800",menunggu_verifikasi:"bg-purple-100 text-purple-800",pending:"bg-yellow-100 text-yellow-800",ditinjau:"bg-indigo-100 text-indigo-800",disetujui:"bg-green-100 text-green-800",ditolak:"bg-red-100 text-red-800",selesai:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800",se=()=>{w.value<ae&&Z.value&&w.value++},ne=()=>{w.value>1&&w.value--},K=s=>{if(s>w.value)return!1;switch(s){case 1:return C.value&&!o.value?.pengajuan_aktif;case 2:return $.value&&t.value;case 3:return!i.value||!o.value?.Persyaratans||o.value.Persyaratans.length===0;case 4:return H.value;default:return!1}},le=s=>K(s)?"bg-green-500 text-white":w.value===s?"bg-blue-500 text-white":"bg-gray-300 text-gray-600",oe=s=>{f.value=s},re=s=>{v.value=s},J=async()=>{try{const s=await Y.get("https://bitwisi.cloud/api/jenis-pengajuan",{headers:{Authorization:`Bearer ${T}`}});V.value=s.data}catch(s){q.value=s.response?s.response.data.message:s.message}finally{z.value=!1}},ie=async()=>{console.log("onPengajuanChange triggered, selectedPengajuanId:",C.value);const s=V.value.find(d=>d.id===C.value);if(!s){console.log("No pengajuan selected, resetting state"),L.value=null,x.value={},y.value={},u.value={},c.value={},f.value=null,v.value=null,w.value=1;return}if(console.log("Selected pengajuan:",s.name),s&&s.pengajuan_aktif){console.log("Active submission found:",s.pengajuan_aktif),M.fire({icon:"warning",title:"Pengajuan Tidak Dapat Dipilih",text:`Anda memiliki pengajuan aktif untuk "${s.name}" dengan status: ${G(s.pengajuan_aktif.status)}. Silakan tunggu hingga proses selesai sebelum mengajukan kembali.`,confirmButtonColor:"#f59e0b"}),C.value="",L.value=null;return}if(s&&s.name.trim().toLowerCase()==="standar pelayanan kelengkapan administrasi permohonan rekomendasi hak atas tanah"){console.log("Target pengajuan matched, showing Swal prompt");try{const d=await M.fire({icon:"question",title:"Konfirmasi Surat Hak Guna Bangunan",text:"Apakah Anda memiliki Surat Hak Guna Bangunan?",showCancelButton:!0,confirmButtonText:"Ya, saya memiliki HGB",cancelButtonText:"Tidak",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"});L.value=d.isConfirmed,console.log("HGB status set to:",L.value)}catch(d){console.error("Swal error:",d),M.fire({icon:"error",title:"Kesalahan",text:"Gagal menampilkan konfirmasi HGB. Silakan coba lagi.",confirmButtonColor:"#ef4444"}),L.value=null;return}}else console.log("Not the target pengajuan, resetting HGB"),L.value=null;x.value={},y.value={},u.value={},c.value={},f.value=null,v.value=null,w.value=1},ue=s=>{const a=document.createElement("input");a.type="file",a.multiple=!1,a.accept=".pdf,.doc,.docx,.jpg,.jpeg,.png",a.onchange=d=>{const r=d.target.files[0];if(!r)return;const g=10*1024*1024;if(r.size>g){M.fire({icon:"error",title:"Ukuran File Terlalu Besar",text:"Ukuran file tidak boleh lebih dari 10 MB",confirmButtonColor:"#3085d6"});return}y.value[s]=r},a.click()},de=async(s,a,d="")=>{const r=new FormData;r.append("file",a),console.log(`Starting upload for requirement ${s}, file: ${a.name}`);try{const g=new AbortController,k=setTimeout(()=>g.abort(),6e4),S=await Y.post("https://invitations.my.id/api/upload-file",r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${T}`},signal:g.signal,timeout:6e4,onUploadProgress:D=>{const ge=Math.round(D.loaded*100/D.total);console.log(`Upload progress for ${a.name}: ${ge}%`)}});if(clearTimeout(k),console.log(`Upload completed for ${a.name}:`,S.data),!S.data||!S.data.data||!S.data.data.path)throw new Error("Invalid response structure from upload API");const B=S.data.data.path;x.value[s]||(x.value[s]=[]);const W={id:Date.now(),name:a.name,size:(a.size/(1024*1024)).toFixed(2)+" MB",path:B,user_note:d};return x.value[s].push(W),{url:B,originalName:a.name,mimeType:a.type,fileSize:a.size,userNote:d}}catch(g){console.error("Upload error details:",{error:g,message:g.message,response:g.response?.data,status:g.response?.status});let k="Gagal mengunggah file";throw g.name==="AbortError"?k="Upload timeout - file terlalu besar atau koneksi lambat":g.code==="ECONNABORTED"?k="Upload timeout - coba lagi dengan file yang lebih kecil":g.response?k=g.response.data?.message||`Upload failed: ${g.response.status}`:g.request&&(k="Tidak dapat terhubung ke server upload"),new Error(k)}},me=(s,a)=>{x.value[s]&&(x.value[s]=x.value[s].filter(d=>d.id!==a))},pe=async()=>{if(o.value){if(!$.value){M.fire({icon:"warning",title:"Data Pemilik Belum Lengkap",text:"Harap lengkapi data pemilik terlebih dahulu.",confirmButtonColor:"#f59e0b"});return}if(!t.value){M.fire({icon:"warning",title:"Data Lahan Belum Lengkap",text:"Harap lengkapi data lahan terlebih dahulu.",confirmButtonColor:"#f59e0b"});return}M.fire({title:"Mengirim Pengajuan...",text:"Mohon tunggu, pengajuan sedang diproses",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{M.showLoading()}});try{let s=[];if(o.value.Persyaratans&&o.value.Persyaratans.length>0){const g=[];for(let k=0;k<o.value.Persyaratans.length;k++){const S=y.value[k],B=x.value[k]&&x.value[k].length>0;!S&&!B&&g.push(o.value.Persyaratans[k])}if(g.length>0){M.fire({icon:"warning",title:"Dokumen Belum Lengkap",html:`Dokumen berikut masih diperlukan:<br/><br/><strong>${g.map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join("<br/>")}</strong>`,confirmButtonColor:"#f59e0b"});return}for(let k=0;k<o.value.Persyaratans.length;k++){const S=o.value.Persyaratans[k];if(y.value[k]){const B=y.value[k],W=u.value[k]||"";try{console.log(`Uploading new file: ${B.name}`);const D=await de(k,B,W);s.push({document_type:S,file_url:D.url,original_name:D.originalName,mime_type:D.mimeType,file_size:D.fileSize,user_note:D.userNote})}catch(D){console.error(`Upload error for ${B.name}:`,D),M.fire({icon:"error",title:"Gagal Upload File",text:`Gagal mengunggah file ${B.name}: ${D.message}`,confirmButtonColor:"#ef4444"});return}}else if(x.value[k]&&x.value[k].length>0)for(const B of x.value[k])s.push({document_type:S,file_url:B.path,original_name:B.name.replace(/\s*\(\d+(?:\.\d+)?\s*MB\)$/,"").trim(),mime_type:"application/pdf",file_size:Math.round(parseFloat(B.size.replace(" MB",""))*1024*1024),user_note:B.user_note||""})}}const a={jenis_pengajuan_id:parseInt(C.value),owner:{nama:f.value.nama,nik:f.value.nik,email:f.value.email,phone:f.value.phone||f.value.no_hp||"",jenis_kelamin:f.value.jenis_kelamin||"L",npwp:f.value.npwp||"",agama:f.value.agama||"",kewarganegaraan:f.value.kewarganegaraan||"WNI",alamat:f.value.alamat||"",pekerjaan:f.value.pekerjaan||"",tanggal_lahir:f.value.tanggal_lahir||"1990-01-01"},lahan:{no_surat_rt:v.value.no_surat_rt||"",jenis_bangunan:v.value.jenis_bangunan,luas_lahan:parseFloat(v.value.luas_lahan),alamat_rt:v.value.alamat_rt||v.value.rt||"",alamat_rw:v.value.alamat_rw||v.value.rw||"",kode_pos:v.value.kode_pos||"",wilayah_kelurahan:v.value.wilayah_kelurahan||v.value.kelurahan||"",wilayah_kecamatan:v.value.wilayah_kecamatan||v.value.kecamatan||"",wilayah_kota:v.value.wilayah_kota||v.value.kota||""},documents:s};console.log("Submitting payload:",a),console.log("Total documents to submit:",s.length);const d=new AbortController,r=setTimeout(()=>d.abort(),3e4);try{const g=await Y.post("https://bitwisi.cloud/api/pengajuan",a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},signal:d.signal,timeout:3e4});clearTimeout(r),console.log("Submit response:",g.data),M.fire({icon:"success",title:"Berhasil Dikirim!",text:"Pengajuan Anda berhasil dikirim dan akan segera diproses. Anda akan mendapat notifikasi melalui email mengenai status pengajuan.",confirmButtonColor:"#10b981",confirmButtonText:"Tutup"}).then(()=>{x.value={},y.value={},u.value={},c.value={},f.value=null,v.value=null,C.value="",L.value=null,w.value=1,J()})}catch(g){throw clearTimeout(r),g.name==="AbortError"?new Error("Request timeout - server took too long to respond"):g}}catch(s){console.error("Error submitting documents:",s);let a="Terjadi kesalahan yang tidak diketahui";s.code==="ECONNABORTED"||s.message.includes("timeout")?a="Request timeout - server tidak merespons dalam waktu yang wajar":s.response?a=s.response.data.message||`Server error: ${s.response.status}`:s.request?a="Tidak dapat terhubung ke server":a=s.message,M.fire({icon:"error",title:"Gagal Mengirim Pengajuan",text:a,confirmButtonColor:"#ef4444"})}}};return be(()=>{console.log("Component mounted, fetching pengajuan"),J()}),(s,a)=>(n(),l(A,null,[ke(he),e("div",la,[e("div",oa,[e("button",{onClick:F,class:"flex items-center gap-2 py-2 rounded mb-3 sm:mb-5 text-sm sm:text-base"},a[1]||(a[1]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1),p(" Kembali ")])),a[55]||(a[55]=e("div",{class:"mb-6 sm:mb-8"},[e("h1",{class:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800 mb-2"}," Persyaratan Izin "),e("p",{class:"text-sm sm:text-base text-gray-600"}," Lengkapi semua langkah berikut untuk mengajukan izin ")],-1)),e("div",ra,[e("div",ia,[(n(),l(A,null,N(P,(d,r)=>e("div",{key:r,class:I(["flex items-center",{"sm:flex-1":r<P.length-1}])},[e("div",ua,[e("div",{class:I(["w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-semibold flex-shrink-0",le(r+1)])},[K(r+1)?(n(),l("svg",da,a[2]||(a[2]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(n(),l("span",ma,m(r+1),1))],2),e("span",{class:I(["ml-2 text-xs sm:text-sm font-medium",{"text-green-600":K(r+1),"text-blue-600":w.value===r+1,"text-gray-500":w.value<r+1&&!K(r+1)}])},m(d.title),3)]),r<P.length-1?(n(),l("div",{key:0,class:I(["hidden sm:flex flex-1 h-px mx-4",{"bg-green-400":K(r+1),"bg-gray-300":!K(r+1)}])},null,2)):b("",!0)],2)),64))])]),z.value?(n(),l("div",pa,a[3]||(a[3]=[e("div",{class:"inline-flex items-center"},[e("div",{class:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-b-2 border-blue-600 mr-3"}),e("p",{class:"text-sm sm:text-base text-gray-600"},"Memuat data pengajuan...")],-1)]))):q.value?(n(),l("div",ga,[e("div",ca,[a[4]||(a[4]=e("svg",{class:"w-8 h-8 sm:w-12 sm:h-12 text-red-400 mx-auto mb-3 sm:mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})],-1)),a[5]||(a[5]=e("p",{class:"text-red-600 font-medium text-sm sm:text-base"},"Terjadi kesalahan",-1)),e("p",va,m(q.value),1),e("button",{onClick:J,class:"mt-3 sm:mt-4 px-3 sm:px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm rounded-md transition-colors"}," Coba Lagi ")])])):(n(),l("div",xa,[a[54]||(a[54]=e("a",{class:"block bg-blue-600 text-white p-3 sm:p-4 rounded-lg text-center text-sm sm:text-base font-medium hover:bg-blue-700 transition-colors",href:"https://invitations.my.id/uploads/file-1755508254923726040-formatdokumenkelengkapan.docx"}," 📄 Download Template Kelengkapan Dokumen ",-1)),w.value===1?(n(),l("div",fa,[a[15]||(a[15]=e("div",{class:"p-4 sm:p-6 border-b border-gray-100"},[e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 1 "),p(" Pilih Jenis Pengajuan ")]),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"}," Pilih jenis izin yang ingin Anda ajukan ")],-1)),e("div",ba,[a[14]||(a[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[p(" Jenis Pengajuan "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ka,[h(e("select",{"onUpdate:modelValue":a[0]||(a[0]=d=>C.value=d),onChange:ie,class:"w-full bg-white border border-gray-300 rounded-lg px-3 sm:px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"},[a[6]||(a[6]=e("option",{value:""},"Pilih jenis pengajuan...",-1)),(n(!0),l(A,null,N(V.value,d=>(n(),l("option",{key:d.id,value:d.id,disabled:!!d.pengajuan_aktif,class:I({"text-gray-400":!!d.pengajuan_aktif,"text-gray-900":!d.pengajuan_aktif})},m(d.name)+" "+m(d.pengajuan_aktif?` (${G(d.pengajuan_aktif.status)})`:""),11,ha))),128))],544),[[Q,C.value]])]),o.value?(n(),l("div",ya,[a[9]||(a[9]=e("h4",{class:"text-sm font-medium text-blue-800 mb-2"},"Informasi Pengajuan",-1)),e("p",wa,m(o.value.name),1),o.value.description?(n(),l("p",_a,m(o.value.description),1)):b("",!0),e("div",ja,[a[8]||(a[8]=e("p",{class:"text-sm font-medium text-blue-800"},"Mohon Siapkan Dokumen Pendukung:",-1)),o.value.Persyaratans&&o.value.Persyaratans.length>0?(n(),l("ul",Pa,[(n(!0),l(A,null,N(o.value.Persyaratans,(d,r)=>(n(),l("li",{key:r,class:"text-xs sm:text-sm text-blue-700 flex items-start"},[a[7]||(a[7]=e("span",{class:"inline-block w-1 h-1 bg-blue-600 rounded-full mt-2 mr-2 flex-shrink-0"},null,-1)),e("span",Ca,m(d),1)]))),128))])):(n(),l("p",Ba," Tidak ada dokumen tambahan yang diperlukan untuk pengajuan ini. "))])])):b("",!0),E.value?(n(),l("div",La,[e("div",Ma,[a[13]||(a[13]=e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 mt-0.5 mr-2 sm:mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",$a,[a[11]||(a[11]=e("h3",{class:"text-sm font-medium text-amber-800"}," Ada Pengajuan yang Sedang Diproses ",-1)),a[12]||(a[12]=e("p",{class:"text-xs sm:text-sm text-amber-700 mt-1"}," Beberapa jenis pengajuan tidak dapat dipilih karena Anda memiliki pengajuan aktif yang sedang diproses. ",-1)),e("div",Da,[a[10]||(a[10]=e("h4",{class:"text-xs font-medium text-amber-800 mb-2"}," Pengajuan yang sedang diproses: ",-1)),e("div",Ua,[(n(!0),l(A,null,N(R.value,d=>(n(),l("div",{key:d.id,class:"bg-white p-3 rounded-md border border-amber-200"},[e("div",Sa,[e("div",za,[e("p",Ta,m(d.name),1),e("div",Ia,[e("span",{class:I(["inline-flex px-2 py-1 rounded text-xs font-medium",te(d.pengajuan_aktif.status)])},m(G(d.pengajuan_aktif.status)),3),e("span",Va," ID: "+m(d.pengajuan_aktif.id_pengajuan),1)])])])]))),128))])])])])])):b("",!0)])])):b("",!0),w.value===2?(n(),l("div",Aa,[a[16]||(a[16]=e("div",{class:"p-4 sm:p-6 border-b border-gray-100"},[e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 2 "),p(" Data Pemilik & Lahan ")]),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"}," Lengkapi data pemilik dan informasi lahan ")],-1)),e("div",Na,[C.value?(n(),ye(na,{key:0,idPengajuan:C.value,onOwnerUpdated:oe,onLahanUpdated:re},null,8,["idPengajuan"])):b("",!0)])])):b("",!0),w.value===3?(n(),l("div",Fa,[e("div",Ka,[a[17]||(a[17]=e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 3 "),p(" Upload Dokumen Persyaratan ")],-1)),e("p",qa,m(o.value&&(!o.value.Persyaratans||o.value.Persyaratans.length===0)?"Tidak ada dokumen tambahan yang diperlukan untuk pengajuan ini":"Upload semua dokumen yang diperlukan"),1)]),e("div",Ha,[o.value&&o.value.Persyaratans&&o.value.Persyaratans.length>0?(n(),l("div",Oa,[(n(!0),l(A,null,N(o.value.Persyaratans,(d,r)=>(n(),l("div",{key:r,class:"border border-gray-200 rounded-lg p-4 sm:p-6 hover:border-gray-300 transition-colors"},[e("div",Ea,[e("div",Ra,[e("div",Ga,m(r+1),1),e("div",Ja,[e("h3",Wa,m(d),1),a[18]||(a[18]=e("div",{class:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 w-fit"},[e("span",{class:"w-1 h-1 bg-red-400 rounded-full mr-1"}),p(" Wajib ")]),e("span",{class:"text-xs text-gray-500"},"Maks. 10 MB")],-1))])]),e("div",Ya,[e("div",Qa,[e("button",{onClick:g=>ue(r),class:"inline-flex items-center justify-center px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white rounded-lg text-sm font-medium transition-colors w-full sm:w-auto"},a[19]||(a[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),p(" Pilih File ")]),8,Xa),y.value[r]?(n(),l("div",Za,[a[20]||(a[20]=e("svg",{class:"w-4 h-4 text-green-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",et,[e("span",at,m(y.value[r].name),1),e("span",tt," ("+m((y.value[r].size/(1024*1024)).toFixed(2))+" MB) ",1)])])):b("",!0)]),e("div",null,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catatan Tambahan (Opsional) ",-1)),h(e("textarea",{"onUpdate:modelValue":g=>u.value[r]=g,rows:"2",placeholder:"Tambahkan catatan untuk dokumen ini jika diperlukan...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none"},null,8,st),[[_,u.value[r]]])]),x.value[r]&&x.value[r].length>0?(n(),l("div",nt,[a[25]||(a[25]=e("h4",{class:"text-sm font-medium text-gray-700"},"File yang telah diupload:",-1)),e("div",lt,[(n(!0),l(A,null,N(x.value[r],g=>(n(),l("div",{key:g.id,class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},[e("div",ot,[e("div",rt,[a[22]||(a[22]=e("svg",{class:"w-4 h-4 text-gray-400 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",it,[e("span",ut,m(g.name),1),e("span",dt,"("+m(g.size)+")",1)])]),e("button",{onClick:k=>me(r,g.id),class:"text-red-500 hover:text-red-700 p-1 ml-2 flex-shrink-0",title:"Hapus file"},a[23]||(a[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,mt)]),g.user_note?(n(),l("div",pt,[a[24]||(a[24]=e("strong",null,"Catatan:",-1)),p(" "+m(g.user_note),1)])):b("",!0)]))),128))])])):b("",!0)])])]))),128))])):o.value&&(!o.value.Persyaratans||o.value.Persyaratans.length===0)?(n(),l("div",gt,[e("div",ct,[a[26]||(a[26]=e("svg",{class:"w-8 h-8 sm:w-12 sm:h-12 text-green-400 mx-auto mb-3 sm:mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),a[27]||(a[27]=e("h3",{class:"text-base sm:text-lg font-medium text-green-800 mb-2"}," Tidak Ada Dokumen Tambahan ",-1)),e("p",vt,' Pengajuan "'+m(o.value.name)+'" tidak memerlukan dokumen tambahan. Anda dapat langsung melanjutkan ke langkah berikutnya. ',1)])])):b("",!0)])])):b("",!0),w.value===4?(n(),l("div",xt,[a[51]||(a[51]=e("div",{class:"p-4 sm:p-6 border-b border-gray-100"},[e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-800 flex items-center"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-2 sm:mr-3 text-xs sm:text-sm font-semibold"}," 4 "),p(" Review & Submit ")]),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1 ml-8 sm:ml-11"}," Periksa kembali semua data sebelum mengirim pengajuan ")],-1)),e("div",ft,[e("div",bt,[a[28]||(a[28]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-2"},"Jenis Pengajuan",-1)),e("p",kt,m(o.value?.name),1)]),$.value?(n(),l("div",ht,[a[33]||(a[33]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Data Pemilik",-1)),e("div",yt,[e("div",wt,[a[29]||(a[29]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"Nama:",-1)),e("span",_t,m(f.value.nama),1)]),e("div",jt,[a[30]||(a[30]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"NIK:",-1)),e("span",Pt,m(f.value.nik),1)]),e("div",Ct,[a[31]||(a[31]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"Email:",-1)),e("span",Bt,m(f.value.email),1)]),f.value.phone||f.value.no_hp?(n(),l("div",Lt,[a[32]||(a[32]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-20"},"Telepon:",-1)),e("span",Mt,m(f.value.phone||f.value.no_hp),1)])):b("",!0)])])):b("",!0),t.value?(n(),l("div",$t,[a[38]||(a[38]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Data Lahan",-1)),e("div",Dt,[e("div",Ut,[a[34]||(a[34]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Jenis Bangunan:",-1)),e("span",St,m(v.value.jenis_bangunan),1)]),e("div",zt,[a[35]||(a[35]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Luas Lahan:",-1)),e("span",Tt,m(v.value.luas_lahan)+" m²",1)]),v.value.kelurahan||v.value.wilayah_kelurahan?(n(),l("div",It,[a[36]||(a[36]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Kelurahan:",-1)),e("span",Vt,m(v.value.kelurahan||v.value.wilayah_kelurahan),1)])):b("",!0),v.value.kecamatan||v.value.wilayah_kecamatan?(n(),l("div",At,[a[37]||(a[37]=e("span",{class:"text-gray-600 text-xs sm:text-sm font-medium sm:w-24"},"Kecamatan:",-1)),e("span",Nt,m(v.value.kecamatan||v.value.wilayah_kecamatan),1)])):b("",!0)])])):b("",!0),o.value&&o.value.Persyaratans&&o.value.Persyaratans.length>0?(n(),l("div",Ft,[a[45]||(a[45]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Dokumen yang Akan Disubmit",-1)),e("div",Kt,[(n(!0),l(A,null,N(o.value.Persyaratans,(d,r)=>(n(),l("div",{key:r,class:"flex items-start justify-between p-2 sm:p-3 bg-gray-50 rounded-md"},[e("div",qt,[e("p",Ht,m(d),1),y.value[r]?(n(),l("div",Ot,[a[40]||(a[40]=e("span",{class:"font-medium"},"File:",-1)),e("span",Et,m(y.value[r].name),1),u.value[r]?(n(),l("div",Rt,[a[39]||(a[39]=e("span",{class:"font-medium"},"Catatan:",-1)),p(" "+m(u.value[r]),1)])):b("",!0)])):x.value[r]&&x.value[r].length>0?(n(),l("div",Gt,[a[42]||(a[42]=e("span",{class:"font-medium"},"File:",-1)),e("span",Jt,m(x.value[r][0].name),1),x.value[r][0].user_note?(n(),l("div",Wt,[a[41]||(a[41]=e("span",{class:"font-medium"},"Catatan:",-1)),p(" "+m(x.value[r][0].user_note),1)])):b("",!0)])):b("",!0)]),e("div",Yt,[y.value[r]||x.value[r]&&x.value[r].length>0?(n(),l("svg",Qt,a[43]||(a[43]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(n(),l("svg",Xt,a[44]||(a[44]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])))])]))),128))])])):b("",!0),H.value?b("",!0):(n(),l("div",Zt,[e("div",es,[a[47]||(a[47]=e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 mt-0.5 mr-2 sm:mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",as,[a[46]||(a[46]=e("h3",{class:"text-sm font-medium text-amber-800"},"Data Belum Lengkap",-1)),e("div",ts,[$.value?b("",!0):(n(),l("p",ss,"• Data pemilik belum lengkap")),t.value?b("",!0):(n(),l("p",ns,"• Data lahan belum lengkap")),i.value?(n(),l("p",ls,"• Masih ada dokumen yang belum diupload")):b("",!0)])])])])),e("div",os,[e("button",{onClick:pe,disabled:!H.value,class:"w-full px-4 sm:px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center justify-center text-sm sm:text-base"},[H.value?(n(),l("svg",us,a[49]||(a[49]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)]))):(n(),l("svg",is,a[48]||(a[48]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)]))),p(" "+m(!o.value?.Persyaratans||o.value.Persyaratans.length===0?"Kirim Pengajuan":"Kirim Pengajuan & Dokumen"),1)],8,rs),a[50]||(a[50]=e("p",{class:"text-xs text-gray-500 text-center mt-2 px-2"}," Dengan mengirim pengajuan ini, Anda menyetujui bahwa semua data yang diberikan adalah benar dan akurat. ",-1))])])])):b("",!0),e("div",ds,[w.value>1?(n(),l("button",{key:0,onClick:ne,class:"inline-flex items-center justify-center px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors text-sm sm:text-base order-2 sm:order-1"},a[52]||(a[52]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),p(" Sebelumnya ")]))):(n(),l("div",ms)),w.value<ae&&Z.value?(n(),l("button",{key:2,onClick:se,class:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors text-sm sm:text-base order-1 sm:order-2"},a[53]||(a[53]=[p(" Selanjutnya "),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):b("",!0)])]))])])],64))}};export{gs as default};
